var on=Object.defineProperty;var an=(e,t,n)=>t in e?on(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var J=(e,t,n)=>(an(e,typeof t!="symbol"?t+"":t,n),n);function j(){}const ft=e=>e;function ln(e,t){for(const n in t)e[n]=t[n];return e}function cn(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function zt(e){return e()}function wt(){return Object.create(null)}function q(e){e.forEach(zt)}function Y(e){return typeof e=="function"}function Q(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Te;function Ce(e,t){return e===t?!0:(Te||(Te=document.createElement("a")),Te.href=t,e===Te.href)}function un(e){return Object.keys(e).length===0}function dt(e,...t){if(e==null){for(const r of t)r(void 0);return j}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function le(e){let t;return dt(e,n=>t=n)(),t}function zs(e,t,n){e.$$.on_destroy.push(dt(t,n))}function fn(e,t,n,r){if(e){const o=Ft(e,t,n,r);return e[0](o)}}function Ft(e,t,n,r){return e[1]&&r?ln(n.ctx.slice(),e[1](r(t))):n.ctx}function dn(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(t.dirty===void 0)return o;if(typeof o=="object"){const a=[],u=Math.max(t.dirty.length,o.length);for(let l=0;l<u;l+=1)a[l]=t.dirty[l]|o[l];return a}return t.dirty|o}return t.dirty}function gn(e,t,n,r,o,a){if(o){const u=Ft(t,n,r,a);e.p(u,o)}}function mn(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function Fs(e){const t={};for(const n in e)t[n]=!0;return t}function Rs(e,t,n){return e.set(n),t}function gt(e){return e&&Y(e.destroy)?e.destroy:j}const Rt=typeof window<"u";let Nt=Rt?()=>window.performance.now():()=>Date.now(),mt=Rt?e=>requestAnimationFrame(e):j;const ge=new Set;function Wt(e){ge.forEach(t=>{t.c(e)||(ge.delete(t),t.f())}),ge.size!==0&&mt(Wt)}function Ut(e){let t;return ge.size===0&&mt(Wt),{promise:new Promise(n=>{ge.add(t={c:e,f:n})}),abort(){ge.delete(t)}}}const Ns=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function L(e,t){e.appendChild(t)}function qt(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function hn(e){const t=B("style");return t.textContent="/* empty */",bn(qt(e),t),t.sheet}function bn(e,t){return L(e.head||e,t),t.sheet}function re(e,t,n){e.insertBefore(t,n||null)}function K(e){e.parentNode&&e.parentNode.removeChild(e)}function Ws(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function B(e){return document.createElement(e)}function he(e){return document.createTextNode(e)}function V(){return he(" ")}function Us(){return he("")}function De(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function qs(e){return function(t){return t.preventDefault(),e.call(this,t)}}function $s(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function Vs(e){return function(t){t.target===this&&e.call(this,t)}}function C(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function pn(e){return Array.from(e.childNodes)}function Oe(e,t){t=""+t,e.data!==t&&(e.data=t)}function yt(e,t){e.value=t??""}function O(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Xs(e,t,n){for(let r=0;r<e.options.length;r+=1){const o=e.options[r];if(o.__value===t){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Zs(e){const t=e.querySelector(":checked");return t&&t.__value}function $t(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}const Be=new Map;let je=0;function An(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function wn(e,t){const n={stylesheet:hn(t),rules:{}};return Be.set(e,n),n}function Qe(e,t,n,r,o,a,u,l=0){const i=16.666/r;let s=`{
`;for(let p=0;p<=1;p+=i){const w=t+(n-t)*a(p);s+=p*100+`%{${u(w,1-w)}}
`}const f=s+`100% {${u(n,1-n)}}
}`,c=`__svelte_${An(f)}_${l}`,g=qt(e),{stylesheet:b,rules:A}=Be.get(g)||wn(g,e);A[c]||(A[c]=!0,b.insertRule(`@keyframes ${c} ${f}`,b.cssRules.length));const d=e.style.animation||"";return e.style.animation=`${d?`${d}, `:""}${c} ${r}ms linear ${o}ms 1 both`,je+=1,c}function Je(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?a=>a.indexOf(t)<0:a=>a.indexOf("__svelte")===-1),o=n.length-r.length;o&&(e.style.animation=r.join(", "),je-=o,je||yn())}function yn(){mt(()=>{je||(Be.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&K(t)}),Be.clear())})}let ve;function X(e){ve=e}function Fe(){if(!ve)throw new Error("Function called outside component initialization");return ve}function Hs(e){Fe().$$.after_update.push(e)}function Ys(e){Fe().$$.on_destroy.push(e)}function Ks(){const e=Fe();return(t,n,{cancelable:r=!1}={})=>{const o=e.$$.callbacks[t];if(o){const a=$t(t,n,{cancelable:r});return o.slice().forEach(u=>{u.call(e,a)}),!a.defaultPrevented}return!0}}function Vt(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const fe=[],xt=[];let me=[];const et=[],Xt=Promise.resolve();let tt=!1;function Zt(){tt||(tt=!0,Xt.then(ht))}function Gs(){return Zt(),Xt}function be(e){me.push(e)}function Qs(e){et.push(e)}const qe=new Set;let ce=0;function ht(){if(ce!==0)return;const e=ve;do{try{for(;ce<fe.length;){const t=fe[ce];ce++,X(t),xn(t.$$)}}catch(t){throw fe.length=0,ce=0,t}for(X(null),fe.length=0,ce=0;xt.length;)xt.pop()();for(let t=0;t<me.length;t+=1){const n=me[t];qe.has(n)||(qe.add(n),n())}me.length=0}while(fe.length);for(;et.length;)et.pop()();tt=!1,qe.clear(),X(e)}function xn(e){if(e.fragment!==null){e.update(),q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(be)}}function vn(e){const t=[],n=[];me.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),me=t}let ye;function Ht(){return ye||(ye=Promise.resolve(),ye.then(()=>{ye=null})),ye}function xe(e,t,n){e.dispatchEvent($t(`${t?"intro":"outro"}${n}`))}const Le=new Set;let Z;function _n(){Z={r:0,c:[],p:Z}}function Sn(){Z.r||q(Z.c),Z=Z.p}function ne(e,t){e&&e.i&&(Le.delete(e),e.i(t))}function pe(e,t,n,r){if(e&&e.o){if(Le.has(e))return;Le.add(e),Z.c.push(()=>{Le.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const Yt={duration:0};function kn(e,t,n){const r={direction:"in"};let o=t(e,n,r),a=!1,u,l,i=0;function s(){u&&Je(e,u)}function f(){const{delay:g=0,duration:b=300,easing:A=ft,tick:d=j,css:p}=o||Yt;p&&(u=Qe(e,0,1,b,g,A,p,i++)),d(0,1);const w=Nt()+g,S=w+b;l&&l.abort(),a=!0,be(()=>xe(e,!0,"start")),l=Ut(k=>{if(a){if(k>=S)return d(1,0),xe(e,!0,"end"),s(),a=!1;if(k>=w){const x=A((k-w)/b);d(x,1-x)}}return a})}let c=!1;return{start(){c||(c=!0,Je(e),Y(o)?(o=o(r),Ht().then(f)):f())},invalidate(){c=!1},end(){a&&(s(),a=!1)}}}function Js(e,t,n,r){let a=t(e,n,{direction:"both"}),u=r?0:1,l=null,i=null,s=null,f;function c(){s&&Je(e,s)}function g(A,d){const p=A.b-u;return d*=Math.abs(p),{a:u,b:A.b,d:p,duration:d,start:A.start,end:A.start+d,group:A.group}}function b(A){const{delay:d=0,duration:p=300,easing:w=ft,tick:S=j,css:k}=a||Yt,x={start:Nt()+d,b:A};A||(x.group=Z,Z.r+=1),"inert"in e&&(A?f!==void 0&&(e.inert=f):(f=e.inert,e.inert=!0)),l||i?i=x:(k&&(c(),s=Qe(e,u,A,p,d,w,k)),A&&S(0,1),l=g(x,p),be(()=>xe(e,A,"start")),Ut(v=>{if(i&&v>i.start&&(l=g(i,p),i=null,xe(e,l.b,"start"),k&&(c(),s=Qe(e,u,l.b,l.duration,0,w,a.css))),l){if(v>=l.end)S(u=l.b,1-u),xe(e,l.b,"end"),i||(l.b?c():--l.group.r||q(l.group.c)),l=null;else if(v>=l.start){const h=v-l.start;u=l.a+l.d*w(h/l.duration),S(u,1-u)}}return!!(l||i)}))}return{run(A){Y(a)?Ht().then(()=>{a=a({direction:A?"in":"out"}),b(A)}):b(A)},end(){c(),l=i=null}}}function er(e,t){const n=t.token={};function r(o,a,u,l){if(t.token!==n)return;t.resolved=l;let i=t.ctx;u!==void 0&&(i=i.slice(),i[u]=l);const s=o&&(t.current=o)(i);let f=!1;t.block&&(t.blocks?t.blocks.forEach((c,g)=>{g!==a&&c&&(_n(),pe(c,1,1,()=>{t.blocks[g]===c&&(t.blocks[g]=null)}),Sn())}):t.block.d(1),s.c(),ne(s,1),s.m(t.mount(),t.anchor),f=!0),t.block=s,t.blocks&&(t.blocks[a]=s),f&&ht()}if(cn(e)){const o=Fe();if(e.then(a=>{X(o),r(t.then,1,t.value,a),X(null)},a=>{if(X(o),r(t.catch,2,t.error,a),X(null),!t.hasCatch)throw a}),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}}function tr(e,t,n){const r=t.slice(),{resolved:o}=e;e.current===e.then&&(r[e.value]=o),e.current===e.catch&&(r[e.error]=o),e.block.p(r,n)}function nr(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function sr(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Ie(e){e&&e.c()}function _e(e,t,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),be(()=>{const a=e.$$.on_mount.map(zt).filter(Y);e.$$.on_destroy?e.$$.on_destroy.push(...a):q(a),e.$$.on_mount=[]}),o.forEach(be)}function Se(e,t){const n=e.$$;n.fragment!==null&&(vn(n.after_update),q(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function En(e,t){e.$$.dirty[0]===-1&&(fe.push(e),Zt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ie(e,t,n,r,o,a,u=null,l=[-1]){const i=ve;X(e);const s=e.$$={fragment:null,ctx:[],props:a,update:j,not_equal:o,bound:wt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(i?i.$$.context:[])),callbacks:wt(),dirty:l,skip_bound:!1,root:t.target||i.$$.root};u&&u(s.root);let f=!1;if(s.ctx=n?n(e,t.props||{},(c,g,...b)=>{const A=b.length?b[0]:g;return s.ctx&&o(s.ctx[c],s.ctx[c]=A)&&(!s.skip_bound&&s.bound[c]&&s.bound[c](A),f&&En(e,c)),g}):[],s.update(),f=!0,q(s.before_update),s.fragment=r?r(s.ctx):!1,t.target){if(t.hydrate){const c=pn(t.target);s.fragment&&s.fragment.l(c),c.forEach(K)}else s.fragment&&s.fragment.c();t.intro&&ne(e.$$.fragment),_e(e,t.target,t.anchor),ht()}X(i)}class oe{constructor(){J(this,"$$");J(this,"$$set")}$destroy(){Se(this,1),this.$destroy=j}$on(t,n){if(!Y(n))return j;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!un(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Tn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Tn);var Cn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gt={exports:{}};(function(e,t){(function(n,r){r(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Cn,function(n){var r,o;if(!((o=(r=globalThis.chrome)==null?void 0:r.runtime)!=null&&o.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const a="The message port closed before a response was received.",u=l=>{const i={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(i).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class s extends WeakMap{constructor(_,E=void 0){super(E),this.createItem=_}get(_){return this.has(_)||this.set(_,this.createItem(_)),super.get(_)}}const f=m=>m&&typeof m=="object"&&typeof m.then=="function",c=(m,_)=>(...E)=>{l.runtime.lastError?m.reject(new Error(l.runtime.lastError.message)):_.singleCallbackArg||E.length<=1&&_.singleCallbackArg!==!1?m.resolve(E[0]):m.resolve(E)},g=m=>m==1?"argument":"arguments",b=(m,_)=>function(D,...P){if(P.length<_.minArgs)throw new Error(`Expected at least ${_.minArgs} ${g(_.minArgs)} for ${m}(), got ${P.length}`);if(P.length>_.maxArgs)throw new Error(`Expected at most ${_.maxArgs} ${g(_.maxArgs)} for ${m}(), got ${P.length}`);return new Promise((F,R)=>{if(_.fallbackToNoCallback)try{D[m](...P,c({resolve:F,reject:R},_))}catch(T){console.warn(`${m} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,T),D[m](...P),_.fallbackToNoCallback=!1,_.noCallback=!0,F()}else _.noCallback?(D[m](...P),F()):D[m](...P,c({resolve:F,reject:R},_))})},A=(m,_,E)=>new Proxy(_,{apply(D,P,F){return E.call(P,m,...F)}});let d=Function.call.bind(Object.prototype.hasOwnProperty);const p=(m,_={},E={})=>{let D=Object.create(null),P={has(R,T){return T in m||T in D},get(R,T,N){if(T in D)return D[T];if(!(T in m))return;let I=m[T];if(typeof I=="function")if(typeof _[T]=="function")I=A(m,m[T],_[T]);else if(d(E,T)){let ae=b(T,E[T]);I=A(m,m[T],ae)}else I=I.bind(m);else if(typeof I=="object"&&I!==null&&(d(_,T)||d(E,T)))I=p(I,_[T],E[T]);else if(d(E,"*"))I=p(I,_[T],E["*"]);else return Object.defineProperty(D,T,{configurable:!0,enumerable:!0,get(){return m[T]},set(ae){m[T]=ae}}),I;return D[T]=I,I},set(R,T,N,I){return T in D?D[T]=N:m[T]=N,!0},defineProperty(R,T,N){return Reflect.defineProperty(D,T,N)},deleteProperty(R,T){return Reflect.deleteProperty(D,T)}},F=Object.create(m);return new Proxy(F,P)},w=m=>({addListener(_,E,...D){_.addListener(m.get(E),...D)},hasListener(_,E){return _.hasListener(m.get(E))},removeListener(_,E){_.removeListener(m.get(E))}}),S=new s(m=>typeof m!="function"?m:function(E){const D=p(E,{},{getContent:{minArgs:0,maxArgs:0}});m(D)}),k=new s(m=>typeof m!="function"?m:function(E,D,P){let F=!1,R,T=new Promise(we=>{R=function(U){F=!0,we(U)}}),N;try{N=m(E,D,R)}catch(we){N=Promise.reject(we)}const I=N!==!0&&f(N);if(N!==!0&&!I&&!F)return!1;const ae=we=>{we.then(U=>{P(U)},U=>{let Ue;U&&(U instanceof Error||typeof U.message=="string")?Ue=U.message:Ue="An unexpected error occurred",P({__mozWebExtensionPolyfillReject__:!0,message:Ue})}).catch(U=>{console.error("Failed to send onMessage rejected reply",U)})};return ae(I?N:T),!0}),x=({reject:m,resolve:_},E)=>{l.runtime.lastError?l.runtime.lastError.message===a?_():m(new Error(l.runtime.lastError.message)):E&&E.__mozWebExtensionPolyfillReject__?m(new Error(E.message)):_(E)},v=(m,_,E,...D)=>{if(D.length<_.minArgs)throw new Error(`Expected at least ${_.minArgs} ${g(_.minArgs)} for ${m}(), got ${D.length}`);if(D.length>_.maxArgs)throw new Error(`Expected at most ${_.maxArgs} ${g(_.maxArgs)} for ${m}(), got ${D.length}`);return new Promise((P,F)=>{const R=x.bind(null,{resolve:P,reject:F});D.push(R),E.sendMessage(...D)})},h={devtools:{network:{onRequestFinished:w(S)}},runtime:{onMessage:w(k),onMessageExternal:w(k),sendMessage:v.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:v.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},y={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return i.privacy={network:{"*":y},services:{"*":y},websites:{"*":y}},p(l,h,i)};n.exports=u(chrome)}else n.exports=globalThis.browser})})(Gt);var z=Gt.exports;const W=Kt(z),rr="Sessionic",ir="1.7.4";var It;const Ae=!!((It=W.runtime)!=null&&It.getBrowserInfo),Qt=W.runtime.getURL(""),or=["id","title","url","favIconUrl","active","discarded","pinned","incognito","mutedInfo",...Ae?["isInReaderMode","cookieStoreId"]:["groupId"]],ar={type:"image/webp",quality:.7,max_size:20},$e={autoSave:!1,autoSaveMaxSessions:5,autoSaveTimer:15},Mn=["http","data:image",...Ae?["chrome://branding"]:[]],vt={"about:addons":"extension","about:preferences":"settings"},lr=!new URL(document.location.href).searchParams.has("tab"),ue=[];function Ln(e,t){return{subscribe:se(e,t).subscribe}}function se(e,t=j){let n;const r=new Set;function o(l){if(Q(e,l)&&(e=l,n)){const i=!ue.length;for(const s of r)s[1](),ue.push(s,e);if(i){for(let s=0;s<ue.length;s+=2)ue[s][0](ue[s+1]);ue.length=0}}}function a(l){o(l(e))}function u(l,i=j){const s=[l,i];return r.add(s),r.size===1&&(n=t(o,a)||j),l(e),()=>{r.delete(s),r.size===0&&n&&(n(),n=null)}}return{set:o,update:a,subscribe:u}}function Jt(e,t,n){const r=!Array.isArray(e),o=r?[e]:e;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return Ln(n,(u,l)=>{let i=!1;const s=[];let f=0,c=j;const g=()=>{if(f)return;c();const A=t(r?s[0]:s,u,l);a?u(A):c=Y(A)?A:j},b=o.map((A,d)=>dt(A,p=>{s[d]=p,f&=~(1<<d),i&&g()},()=>{f|=1<<d}));return i=!0,g(),function(){q(b),c(),i=!1}})}const cr=(()=>{if(!Ae)return;const e=document.createElement("img"),t=document.createElement("canvas").getContext("2d");return{async icon(n,r){return!t||!e||!n||!n.startsWith("data:")?n:new Promise(o=>{e.src=n,e.onload=a=>{if(a.currentTarget instanceof HTMLImageElement){let{max_size:u,quality:l}=r||{max_size:20,quality:.7};(!u||u>=a.currentTarget.naturalWidth)&&(u=a.currentTarget.naturalWidth,l=1),t.canvas.height=u,t.canvas.width=u,t.drawImage(a.currentTarget,0,0,u,u);const i=t.canvas.toDataURL(r==null?void 0:r.type,l);o(n.length>i.length?i:n)}}})}}})(),nt=(e,t)=>t.some(n=>e instanceof n);let _t,St;function Dn(){return _t||(_t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function On(){return St||(St=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const st=new WeakMap,Ve=new WeakMap,Re=new WeakMap;function Bn(e){const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("success",a),e.removeEventListener("error",u)},a=()=>{n(te(e.result)),o()},u=()=>{r(e.error),o()};e.addEventListener("success",a),e.addEventListener("error",u)});return Re.set(t,e),t}function jn(e){if(st.has(e))return;const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",u),e.removeEventListener("abort",u)},a=()=>{n(),o()},u=()=>{r(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",a),e.addEventListener("error",u),e.addEventListener("abort",u)});st.set(e,t)}let rt={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return st.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return te(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function en(e){rt=e(rt)}function In(e){return On().includes(e)?function(...t){return e.apply(it(this),t),te(this.request)}:function(...t){return te(e.apply(it(this),t))}}function Pn(e){return typeof e=="function"?In(e):(e instanceof IDBTransaction&&jn(e),nt(e,Dn())?new Proxy(e,rt):e)}function te(e){if(e instanceof IDBRequest)return Bn(e);if(Ve.has(e))return Ve.get(e);const t=Pn(e);return t!==e&&(Ve.set(e,t),Re.set(t,e)),t}const it=e=>Re.get(e);function zn(e,t,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const u=indexedDB.open(e,t),l=te(u);return r&&u.addEventListener("upgradeneeded",i=>{r(te(u.result),i.oldVersion,i.newVersion,te(u.transaction),i)}),n&&u.addEventListener("blocked",i=>n(i.oldVersion,i.newVersion,i)),l.then(i=>{a&&i.addEventListener("close",()=>a()),o&&i.addEventListener("versionchange",s=>o(s.oldVersion,s.newVersion,s))}).catch(()=>{}),l}const Fn=["get","getKey","getAll","getAllKeys","count"],Rn=["put","add","delete","clear"],Xe=new Map;function kt(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Xe.get(t))return Xe.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=Rn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Fn.includes(n)))return;const a=async function(u,...l){const i=this.transaction(u,o?"readwrite":"readonly");let s=i.store;return r&&(s=s.index(l.shift())),(await Promise.all([s[n](...l),o&&i.done]))[0]};return Xe.set(t,a),a}en(e=>({...e,get:(t,n,r)=>kt(t,n)||e.get(t,n,r),has:(t,n)=>!!kt(t,n)||e.has(t,n)}));const Nn=["continue","continuePrimaryKey","advance"],Et={},ot=new WeakMap,tn=new WeakMap,Wn={get(e,t){if(!Nn.includes(t))return e[t];let n=Et[t];return n||(n=Et[t]=function(...r){ot.set(this,tn.get(this)[t](...r))}),n}};async function*Un(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,Wn);for(tn.set(n,t),Re.set(n,it(t));t;)yield n,t=await(ot.get(n)||t.continue()),ot.delete(n)}function Tt(e,t){return t===Symbol.asyncIterator&&nt(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&nt(e,[IDBIndex,IDBObjectStore])}en(e=>({...e,get(t,n,r){return Tt(t,n)?Un:e.get(t,n,r)},has(t,n){return Tt(t,n)||e.has(t,n)}}));var Ne={exports:{}};function qn(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}var $n=Vn;function Vn(e,t,n){var r=n&&n.stringify||qn,o=1;if(typeof e=="object"&&e!==null){var a=t.length+o;if(a===1)return e;var u=new Array(a);u[0]=r(e);for(var l=1;l<a;l++)u[l]=r(t[l]);return u.join(" ")}if(typeof e!="string")return e;var i=t.length;if(i===0)return e;for(var s="",f=1-o,c=-1,g=e&&e.length||0,b=0;b<g;){if(e.charCodeAt(b)===37&&b+1<g){switch(c=c>-1?c:0,e.charCodeAt(b+1)){case 100:case 102:if(f>=i||t[f]==null)break;c<b&&(s+=e.slice(c,b)),s+=Number(t[f]),c=b+2,b++;break;case 105:if(f>=i||t[f]==null)break;c<b&&(s+=e.slice(c,b)),s+=Math.floor(Number(t[f])),c=b+2,b++;break;case 79:case 111:case 106:if(f>=i||t[f]===void 0)break;c<b&&(s+=e.slice(c,b));var A=typeof t[f];if(A==="string"){s+="'"+t[f]+"'",c=b+2,b++;break}if(A==="function"){s+=t[f].name||"<anonymous>",c=b+2,b++;break}s+=r(t[f]),c=b+2,b++;break;case 115:if(f>=i)break;c<b&&(s+=e.slice(c,b)),s+=String(t[f]),c=b+2,b++;break;case 37:c<b&&(s+=e.slice(c,b)),s+="%",c=b+2,b++,f--;break}++f}++b}return c===-1?e:(c<g&&(s+=e.slice(c)),s)}const Ct=$n;Ne.exports=H;const ke=os().console||{},Xn={mapHttpRequest:Me,mapHttpResponse:Me,wrapRequestSerializer:Ze,wrapResponseSerializer:Ze,wrapErrorSerializer:Ze,req:Me,res:Me,err:Lt,errWithCause:Lt};function Pe(e,t){return e==="silent"?1/0:t.levels.values[e]}const bt=Symbol("pino.logFuncs"),at=Symbol("pino.hierarchy"),Zn={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Mt(e,t){const n={logger:t,parent:e[at]};t[at]=n}function Hn(e,t,n){const r={};t.forEach(o=>{r[o]=n[o]?n[o]:ke[o]||ke[Zn[o]||"log"]||Ee}),e[bt]=r}function Yn(e,t){return Array.isArray(e)?e.filter(function(r){return r!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function H(e){e=e||{},e.browser=e.browser||{};const t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");const n=e.browser.write||ke;e.browser.write&&(e.browser.asObject=!0);const r=e.serializers||{},o=Yn(e.browser.serialize,r);let a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);const u=Object.keys(e.customLevels||{}),l=["error","fatal","warn","info","debug","trace"].concat(u);typeof n=="function"&&l.forEach(function(d){n[d]=n}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");const i=e.level||"info",s=Object.create(n);s.log||(s.log=Ee),Hn(s,l,n),Mt({},s),Object.defineProperty(s,"levelVal",{get:c}),Object.defineProperty(s,"level",{get:g,set:b});const f={transmit:t,serialize:o,asObject:e.browser.asObject,levels:l,timestamp:ss(e)};s.levels=Kn(e),s.level=i,s.setMaxListeners=s.getMaxListeners=s.emit=s.addListener=s.on=s.prependListener=s.once=s.prependOnceListener=s.removeListener=s.removeAllListeners=s.listeners=s.listenerCount=s.eventNames=s.write=s.flush=Ee,s.serializers=r,s._serialize=o,s._stdErrSerialize=a,s.child=A,t&&(s._logEvent=lt());function c(){return Pe(this.level,this)}function g(){return this._level}function b(d){if(d!=="silent"&&!this.levels.values[d])throw Error("unknown level "+d);this._level=d,ee(this,f,s,"error"),ee(this,f,s,"fatal"),ee(this,f,s,"warn"),ee(this,f,s,"info"),ee(this,f,s,"debug"),ee(this,f,s,"trace"),u.forEach(p=>{ee(this,f,s,p)})}function A(d,p){if(!d)throw new Error("missing bindings for child Pino");p=p||{},o&&d.serializers&&(p.serializers=d.serializers);const w=p.serializers;if(o&&w){var S=Object.assign({},r,w),k=e.browser.serialize===!0?Object.keys(S):o;delete d.serializers,We([d],k,S,this._stdErrSerialize)}function x(h){this._childLevel=(h._childLevel|0)+1,this.bindings=d,S&&(this.serializers=S,this._serialize=k),t&&(this._logEvent=lt([].concat(h._logEvent.bindings,d)))}x.prototype=this;const v=new x(this);return Mt(this,v),v.level=this.level,v}return s}function Kn(e){const t=e.customLevels||{},n=Object.assign({},H.levels.values,t),r=Object.assign({},H.levels.labels,Gn(t));return{values:n,labels:r}}function Gn(e){const t={};return Object.keys(e).forEach(function(n){t[e[n]]=n}),t}H.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};H.stdSerializers=Xn;H.stdTimeFunctions=Object.assign({},{nullTime:nn,epochTime:sn,unixTime:rs,isoTime:is});function Qn(e){const t=[];e.bindings&&t.push(e.bindings);let n=e[at];for(;n.parent;)n=n.parent,n.logger.bindings&&t.push(n.logger.bindings);return t.reverse()}function ee(e,t,n,r){if(e[r]=Pe(e.level,n)>Pe(r,n)?Ee:n[bt][r],!t.transmit&&e[r]===Ee)return;e[r]=es(e,t,n,r);const o=Qn(e);o.length!==0&&(e[r]=Jn(o,e[r]))}function Jn(e,t){return function(){return t.apply(this,[...e,...arguments])}}function es(e,t,n,r){return function(o){return function(){const u=t.timestamp(),l=new Array(arguments.length),i=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ke?ke:this;for(var s=0;s<l.length;s++)l[s]=arguments[s];if(t.serialize&&!t.asObject&&We(l,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?o.call(i,ts(this,r,l,u)):o.apply(i,l),t.transmit){const f=t.transmit.level||e._level,c=n.levels.values[f],g=n.levels.values[r];if(g<c)return;ns(this,{ts:u,methodLevel:r,methodValue:g,transmitLevel:f,transmitValue:n.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:Pe(e._level,n)},l)}}}(e[bt][r])}function ts(e,t,n,r){e._serialize&&We(n,e._serialize,e.serializers,e._stdErrSerialize);const o=n.slice();let a=o[0];const u={};r&&(u.time=r),u.level=e.levels.values[t];let l=(e._childLevel|0)+1;if(l<1&&(l=1),a!==null&&typeof a=="object"){for(;l--&&typeof o[0]=="object";)Object.assign(u,o.shift());a=o.length?Ct(o.shift(),o):void 0}else typeof a=="string"&&(a=Ct(o.shift(),o));return a!==void 0&&(u.msg=a),u}function We(e,t,n,r){for(const o in e)if(r&&e[o]instanceof Error)e[o]=H.stdSerializers.err(e[o]);else if(typeof e[o]=="object"&&!Array.isArray(e[o]))for(const a in e[o])t&&t.indexOf(a)>-1&&a in n&&(e[o][a]=n[a](e[o][a]))}function ns(e,t,n){const r=t.send,o=t.ts,a=t.methodLevel,u=t.methodValue,l=t.val,i=e._logEvent.bindings;We(n,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=o,e._logEvent.messages=n.filter(function(s){return i.indexOf(s)===-1}),e._logEvent.level.label=a,e._logEvent.level.value=u,r(a,e._logEvent,l),e._logEvent=lt(i)}function lt(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function Lt(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const n in e)t[n]===void 0&&(t[n]=e[n]);return t}function ss(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?nn:sn}function Me(){return{}}function Ze(e){return e}function Ee(){}function nn(){return!1}function sn(){return Date.now()}function rs(){return Math.round(Date.now()/1e3)}function is(){return new Date(Date.now()).toISOString()}function os(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}Ne.exports.default=H;Ne.exports.pino=H;var as=Ne.exports;const ls=Kt(as),M=ls({level:"warn"}),de=class de{constructor(){J(this,"db");J(this,"open",!1);J(this,"version",1);return de.instance||(de.instance=this),de.instance}async initDB(){if(this.open){M.debug("[db.initDB[] already open");return}M.info("[db.initDB] init"),this.db=await zn("sessions",this.version,{upgrade:this.upgradeSessions}),this.open=!0,this.db.onclose=()=>M.info("[db.initDB] closing db"),this.db.onerror=()=>M.error("[db.initDB] error in db: ",this.db),this.db.onabort=()=>M.error("[db.initDB]: aborted transactions in db: ",this.db)}async loadSessions(t,n){return M.info("[db.loadSessions] init"),await this.initDB(),this.db.getAllFromIndex("sessions","dateSaved",t,n)}async streamSessions(t="dateSaved",n,r,o){M.info("[db.lazyLoadSessions] init");const a=[];await this.initDB();const u=this.db.transaction("sessions").store.index(t),l=await u.count();let i=0;r||(r=l);for await(const s of u.iterate(void 0,o))s.value.windows={length:s.value.windows.length},a.push(s.value),i++,(i===r||a.length===l)&&(i=0,n(a));return l}async loadSessionWindows(t){var n;return M.info("[db.loadSessionWindows] init"),await this.initDB(),(n=await this.db.get("sessions",t))==null?void 0:n.windows}async saveSession(t){return M.info("[db.saveSession] init"),await this.initDB(),this.db.add("sessions",t)}async saveSessions(t){M.info("[db.saveSessions] init"),await this.initDB();const n=this.db.transaction("sessions","readwrite");return new Promise((r,o)=>{for(const a of t)n.store.add(a);n.oncomplete=()=>{M.info("[db.saveSessions] saved batch sessions: ",t),r()},n.onerror=()=>{M.error("[db.saveSessions] error saving sessions: ",t),o()},n.onabort=()=>{M.error("[db.saveSessions] aborted saving sessions: ",t),o()}})}async updateSession(t){return M.info("[db.updateSession] init"),await this.initDB(),this.db.put("sessions",t)}async deleteSession(t){return M.info("[db.deleteSession] init"),await this.initDB(),this.db.delete("sessions",t.id)}async getAutosavedCount(){return M.info("[db.getAutosavedCount] init"),await this.initDB(),this.db.countFromIndex("sessions","tags","Autosave")}async deleteLastAutosavedSession(t=1){M.info("[db.deleteLastAutosavedSession] init"),await this.initDB();const n=this.db.transaction("sessions","readwrite").store.index("dateSaved");for await(const r of n.iterate(null,"next"))if(r.value.tags==="Autosave"&&(r.delete(),t--,!t))break}async deleteSessions(){return M.info("[db.deleteSessions] init"),await this.initDB(),this.db.clear("sessions")}upgradeSessions(t,n,r,o,a){if(M.info(`[db.upgradeSession] init - version: ${r}, old: ${n}`),r===1){M.info("[db.upgradeSession] creating object store");const u=t.createObjectStore("sessions",{keyPath:"id"});u.createIndex("title","title",{unique:!1}),u.createIndex("dateSaved","dateSaved",{unique:!1}),u.createIndex("tags","tags",{unique:!1})}}};J(de,"instance");let ct=de;const G=new ct;var pt={exports:{}};pt.exports;(function(e){var t=function(){var n=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",a={};function u(i,s){if(!a[i]){a[i]={};for(var f=0;f<i.length;f++)a[i][i.charAt(f)]=f}return a[i][s]}var l={compressToBase64:function(i){if(i==null)return"";var s=l._compress(i,6,function(f){return r.charAt(f)});switch(s.length%4){default:case 0:return s;case 1:return s+"===";case 2:return s+"==";case 3:return s+"="}},decompressFromBase64:function(i){return i==null?"":i==""?null:l._decompress(i.length,32,function(s){return u(r,i.charAt(s))})},compressToUTF16:function(i){return i==null?"":l._compress(i,15,function(s){return n(s+32)})+" "},decompressFromUTF16:function(i){return i==null?"":i==""?null:l._decompress(i.length,16384,function(s){return i.charCodeAt(s)-32})},compressToUint8Array:function(i){for(var s=l.compress(i),f=new Uint8Array(s.length*2),c=0,g=s.length;c<g;c++){var b=s.charCodeAt(c);f[c*2]=b>>>8,f[c*2+1]=b%256}return f},decompressFromUint8Array:function(i){if(i==null)return l.decompress(i);for(var s=new Array(i.length/2),f=0,c=s.length;f<c;f++)s[f]=i[f*2]*256+i[f*2+1];var g=[];return s.forEach(function(b){g.push(n(b))}),l.decompress(g.join(""))},compressToEncodedURIComponent:function(i){return i==null?"":l._compress(i,6,function(s){return o.charAt(s)})},decompressFromEncodedURIComponent:function(i){return i==null?"":i==""?null:(i=i.replace(/ /g,"+"),l._decompress(i.length,32,function(s){return u(o,i.charAt(s))}))},compress:function(i){return l._compress(i,16,function(s){return n(s)})},_compress:function(i,s,f){if(i==null)return"";var c,g,b={},A={},d="",p="",w="",S=2,k=3,x=2,v=[],h=0,y=0,m;for(m=0;m<i.length;m+=1)if(d=i.charAt(m),Object.prototype.hasOwnProperty.call(b,d)||(b[d]=k++,A[d]=!0),p=w+d,Object.prototype.hasOwnProperty.call(b,p))w=p;else{if(Object.prototype.hasOwnProperty.call(A,w)){if(w.charCodeAt(0)<256){for(c=0;c<x;c++)h=h<<1,y==s-1?(y=0,v.push(f(h)),h=0):y++;for(g=w.charCodeAt(0),c=0;c<8;c++)h=h<<1|g&1,y==s-1?(y=0,v.push(f(h)),h=0):y++,g=g>>1}else{for(g=1,c=0;c<x;c++)h=h<<1|g,y==s-1?(y=0,v.push(f(h)),h=0):y++,g=0;for(g=w.charCodeAt(0),c=0;c<16;c++)h=h<<1|g&1,y==s-1?(y=0,v.push(f(h)),h=0):y++,g=g>>1}S--,S==0&&(S=Math.pow(2,x),x++),delete A[w]}else for(g=b[w],c=0;c<x;c++)h=h<<1|g&1,y==s-1?(y=0,v.push(f(h)),h=0):y++,g=g>>1;S--,S==0&&(S=Math.pow(2,x),x++),b[p]=k++,w=String(d)}if(w!==""){if(Object.prototype.hasOwnProperty.call(A,w)){if(w.charCodeAt(0)<256){for(c=0;c<x;c++)h=h<<1,y==s-1?(y=0,v.push(f(h)),h=0):y++;for(g=w.charCodeAt(0),c=0;c<8;c++)h=h<<1|g&1,y==s-1?(y=0,v.push(f(h)),h=0):y++,g=g>>1}else{for(g=1,c=0;c<x;c++)h=h<<1|g,y==s-1?(y=0,v.push(f(h)),h=0):y++,g=0;for(g=w.charCodeAt(0),c=0;c<16;c++)h=h<<1|g&1,y==s-1?(y=0,v.push(f(h)),h=0):y++,g=g>>1}S--,S==0&&(S=Math.pow(2,x),x++),delete A[w]}else for(g=b[w],c=0;c<x;c++)h=h<<1|g&1,y==s-1?(y=0,v.push(f(h)),h=0):y++,g=g>>1;S--,S==0&&(S=Math.pow(2,x),x++)}for(g=2,c=0;c<x;c++)h=h<<1|g&1,y==s-1?(y=0,v.push(f(h)),h=0):y++,g=g>>1;for(;;)if(h=h<<1,y==s-1){v.push(f(h));break}else y++;return v.join("")},decompress:function(i){return i==null?"":i==""?null:l._decompress(i.length,32768,function(s){return i.charCodeAt(s)})},_decompress:function(i,s,f){var c=[],g=4,b=4,A=3,d="",p=[],w,S,k,x,v,h,y,m={val:f(0),position:s,index:1};for(w=0;w<3;w+=1)c[w]=w;for(k=0,v=Math.pow(2,2),h=1;h!=v;)x=m.val&m.position,m.position>>=1,m.position==0&&(m.position=s,m.val=f(m.index++)),k|=(x>0?1:0)*h,h<<=1;switch(k){case 0:for(k=0,v=Math.pow(2,8),h=1;h!=v;)x=m.val&m.position,m.position>>=1,m.position==0&&(m.position=s,m.val=f(m.index++)),k|=(x>0?1:0)*h,h<<=1;y=n(k);break;case 1:for(k=0,v=Math.pow(2,16),h=1;h!=v;)x=m.val&m.position,m.position>>=1,m.position==0&&(m.position=s,m.val=f(m.index++)),k|=(x>0?1:0)*h,h<<=1;y=n(k);break;case 2:return""}for(c[3]=y,S=y,p.push(y);;){if(m.index>i)return"";for(k=0,v=Math.pow(2,A),h=1;h!=v;)x=m.val&m.position,m.position>>=1,m.position==0&&(m.position=s,m.val=f(m.index++)),k|=(x>0?1:0)*h,h<<=1;switch(y=k){case 0:for(k=0,v=Math.pow(2,8),h=1;h!=v;)x=m.val&m.position,m.position>>=1,m.position==0&&(m.position=s,m.val=f(m.index++)),k|=(x>0?1:0)*h,h<<=1;c[b++]=n(k),y=b-1,g--;break;case 1:for(k=0,v=Math.pow(2,16),h=1;h!=v;)x=m.val&m.position,m.position>>=1,m.position==0&&(m.position=s,m.val=f(m.index++)),k|=(x>0?1:0)*h,h<<=1;c[b++]=n(k),y=b-1,g--;break;case 2:return p.join("")}if(g==0&&(g=Math.pow(2,A),A++),c[y])d=c[y];else if(y===b)d=S+S.charAt(0);else return null;p.push(d),c[b++]=S+d.charAt(0),g--,S=d,g==0&&(g=Math.pow(2,A),A++)}}};return l}();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})})(pt);var cs=pt.exports;function ur(){return document.visibilityState==="visible"}function fr(){return rn("options")}function dr(){return rn("popup","?tab=true")}async function rn(e,t){const[n,r]=await Promise.all([W.tabs.query({active:!0,currentWindow:!0}),W.tabs.query({url:Dt(e,t)})]);if(!n.length)return;const o=n[0];if(!r.length)W.tabs.create({url:Dt(e,t),index:o.index+1});else{const a=r[0];(Math.abs(o.index-a.index)>=15&&Ae||a.windowId!==o.windowId)&&W.tabs.move(a.id,{index:o.index+1,windowId:o.windowId}),W.tabs.update(a.id,{active:!0,highlighted:!0})}}function Dt(e,t=""){return`${Qt}src/${e}/index.html${t}`}function gr(e,t){return e?(t&&(t=cs.decompress(t)),(Ae||e.startsWith("http"))&&Mn.some(n=>t==null?void 0:t.startsWith(n))?t:us(e)):null}const mr=e=>{for(const t in vt)if(e.includes(t))return vt[t];return"global"},us=e=>Ae?null:`${Qt}_favicon/?pageUrl=${e}&size=16`;function fs(e){const t=Date.now();return{title:e.title,windows:structuredClone(e.windows),tabsNumber:e.tabsNumber,dateSaved:t,dateModified:t,id:crypto.randomUUID(),tags:e.tags}}var Pt;const ds=(Pt=W==null?void 0:W.runtime)==null?void 0:Pt.sendMessage;async function gs(e,t){return(await z.storage.local.get(e))[e]??t}async function ms(e){return await z.storage.local.get(e)}function Ot(e){return z.storage.local.set(e)}let He;async function Bt(e,t){He&&clearTimeout(He),t&&document.body.classList.add("fade"),document.body.classList.toggle("dark",e),document.documentElement.style.colorScheme=e?"dark":"normal",t&&(He=setTimeout(()=>{document.body.classList.remove("fade")},200))}function hs(e){let t,n,r,o,a,u,l,i,s,f,c;return i=new jt({props:{title:"Bitcoin (BTC)",src:"../../images/btc-qr.png",srcIcon:"../../images/btc-icon.png",address:"1Dsu6EHhQxZwtBN3RE4nXLVQrzTCKoMn2p"}}),f=new jt({props:{title:"Ethereum (ETH)",src:"../../images/eth-qr.png",srcIcon:"../../images/eth-icon.png",address:"0xa088a54b3048a97d799b6455a7608f50cb4721e3"}}),{c(){t=B("div"),n=B("p"),n.textContent=`${z.i18n.getMessage("aboutDonateText")}`,r=V(),o=B("div"),a=B("div"),a.innerHTML='<a href="https://ko-fi.com/navorite" target="_blank" class="h-full hover:brightness-110"><img class="h-full" src="../../images/donate_kofi.webp" alt="Donate using Ko-fi.com"/></a> <a href="https://www.patreon.com/navorite" target="_blank" class="flex h-full items-center gap-2 rounded-md bg-[#f96854] p-2 font-bold text-black hover:brightness-125"><img class="h-8" src="../../images/donate_patreon.png" alt="Donate using Patreon.com"/>BECOME A PATRON</a>',u=V(),l=B("div"),Ie(i.$$.fragment),s=V(),Ie(f.$$.fragment),C(n,"class","mb-4"),C(a,"class","flex h-20 w-full justify-center gap-4"),C(l,"class","flex w-full justify-center gap-4"),C(o,"class","flex flex-wrap gap-4")},m(g,b){re(g,t,b),L(t,n),L(t,r),L(t,o),L(o,a),L(o,u),L(o,l),_e(i,l,null),L(l,s),_e(f,l,null),c=!0},p:j,i(g){c||(ne(i.$$.fragment,g),ne(f.$$.fragment,g),c=!0)},o(g){pe(i.$$.fragment,g),pe(f.$$.fragment,g),c=!1},d(g){g&&K(t),Se(i),Se(f)}}}class hr extends oe{constructor(t){super(),ie(this,t,null,hs,Q,{})}}function bs(e){let t,n,r,o,a,u;return n=new Ls({props:{role:"img",icon:e[1]?"check":"copy",class:"text-2xl "+(e[1]?"text-neutral-content-disabled":"")}}),{c(){t=B("button"),Ie(n.$$.fragment),C(t,"type","button"),C(t,"class","rounded-md bg-black/30 p-1 hover:bg-black/50")},m(l,i){re(l,t,i),_e(n,t,null),o=!0,a||(u=[gt(r=At.call(null,t,{title:e[1]?"Copied":"Copy to clipboard"})),De(t,"click",e[3])],a=!0)},p(l,[i]){const s={};i&2&&(s.icon=l[1]?"check":"copy"),i&2&&(s.class="text-2xl "+(l[1]?"text-neutral-content-disabled":"")),n.$set(s),r&&Y(r.update)&&i&2&&r.update.call(null,{title:l[1]?"Copied":"Copy to clipboard"})},i(l){o||(ne(n.$$.fragment,l),o=!0)},o(l){pe(n.$$.fragment,l),o=!1},d(l){l&&K(t),Se(n),a=!1,q(u)}}}function ps(e,t,n){let{value:r}=t,o=!1,a;const u=()=>{a||(navigator.clipboard.writeText(r),n(1,o=!0),n(2,a=setTimeout(()=>{n(1,o=!1),n(2,a=null)},2e3)))};return e.$$set=l=>{"value"in l&&n(0,r=l.value)},[r,o,a,u]}class As extends oe{constructor(t){super(),ie(this,t,ps,bs,Q,{value:0})}}function ws(e){let t,n,r,o,a,u,l,i,s,f,c,g,b,A,d,p,w,S,k,x,v;return x=new As({props:{value:e[3]}}),{c(){t=B("div"),n=B("h3"),r=B("img"),a=V(),u=he(e[2]),l=V(),i=B("div"),s=B("img"),g=V(),b=B("div"),A=B("h4"),A.textContent="Address",d=V(),p=B("div"),w=B("p"),S=he(e[3]),k=V(),Ie(x.$$.fragment),C(r,"class","h-5 w-5"),Ce(r.src,o=e[0])||C(r,"src",o),C(r,"alt",e[2]),C(n,"class","flex items-center gap-2"),C(s,"class","rounded-md bg-white p-2"),Ce(s.src,f=e[1])||C(s,"src",f),C(s,"alt",c="Donate using "+e[2]),C(A,"class","font-normal text-sm"),C(w,"class","break-all text-xs"),C(p,"class","mt-1 flex items-center gap-2"),C(i,"class","grid grid-cols-[auto_1fr] w-full gap-4 max-w-58"),C(t,"class","flex max-w-xs flex-col gap-4 rounded-md bg-[hsla(0,0%,60%,0.2)] p-4 font-semibold")},m(h,y){re(h,t,y),L(t,n),L(n,r),L(n,a),L(n,u),L(t,l),L(t,i),L(i,s),L(i,g),L(i,b),L(b,A),L(b,d),L(b,p),L(p,w),L(w,S),L(p,k),_e(x,p,null),v=!0},p(h,[y]){(!v||y&1&&!Ce(r.src,o=h[0]))&&C(r,"src",o),(!v||y&4)&&C(r,"alt",h[2]),(!v||y&4)&&Oe(u,h[2]),(!v||y&2&&!Ce(s.src,f=h[1]))&&C(s,"src",f),(!v||y&4&&c!==(c="Donate using "+h[2]))&&C(s,"alt",c),(!v||y&8)&&Oe(S,h[3]);const m={};y&8&&(m.value=h[3]),x.$set(m)},i(h){v||(ne(x.$$.fragment,h),v=!0)},o(h){pe(x.$$.fragment,h),v=!1},d(h){h&&K(t),Se(x)}}}function ys(e,t,n){let{srcIcon:r}=t,{src:o}=t,{title:a}=t,{address:u}=t;return e.$$set=l=>{"srcIcon"in l&&n(0,r=l.srcIcon),"src"in l&&n(1,o=l.src),"title"in l&&n(2,a=l.title),"address"in l&&n(3,u=l.address)},[r,o,a,u]}class jt extends oe{constructor(t){super(),ie(this,t,ys,ws,Q,{srcIcon:0,src:1,title:2,address:3})}}function br(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function xs(e){const t=e-1;return t*t*t+1}function vs(e,{delay:t=0,duration:n=400,easing:r=ft}={}){const o=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:a=>`opacity: ${a*o}`}}function pr(e,{delay:t=0,duration:n=400,easing:r=xs,axis:o="y"}={}){const a=getComputedStyle(e),u=+a.opacity,l=o==="y"?"height":"width",i=parseFloat(a[l]),s=o==="y"?["top","bottom"]:["left","right"],f=s.map(w=>`${w[0].toUpperCase()}${w.slice(1)}`),c=parseFloat(a[`padding${f[0]}`]),g=parseFloat(a[`padding${f[1]}`]),b=parseFloat(a[`margin${f[0]}`]),A=parseFloat(a[`margin${f[1]}`]),d=parseFloat(a[`border${f[0]}Width`]),p=parseFloat(a[`border${f[1]}Width`]);return{delay:t,duration:n,easing:r,css:w=>`overflow: hidden;opacity: ${Math.min(w*20,1)*u};${l}: ${w*i}px;padding-${s[0]}: ${w*c}px;padding-${s[1]}: ${w*g}px;margin-${s[0]}: ${w*b}px;margin-${s[1]}: ${w*A}px;border-${s[0]}-width: ${w*d}px;border-${s[1]}-width: ${w*p}px;`}}function _s(e){let t,n,r;return{c(){t=B("div"),n=he(e[0]),t.inert=!0,C(t,"role","tooltip"),O(t,"position","absolute"),O(t,"top",e[2]+"px"),O(t,"left",e[1]+"px"),O(t,"translate",e[5].X+"% "+e[5].Y+"%"),C(t,"class","svelte-4uwiup")},m(o,a){re(o,t,a),L(t,n)},p(o,[a]){e=o,a&1&&Oe(n,e[0]),a&4&&O(t,"top",e[2]+"px"),a&2&&O(t,"left",e[1]+"px"),a&32&&O(t,"translate",e[5].X+"% "+e[5].Y+"%")},i(o){r||be(()=>{r=kn(t,vs,{delay:e[3],duration:e[4]}),r.start()})},o:j,d(o){o&&K(t)}}}function Ss(e,t,n){let{title:r}=t,{x:o}=t,{y:a}=t,{delay:u=600}=t,{duration:l=100}=t,{translate:i}=t;return e.$$set=s=>{"title"in s&&n(0,r=s.title),"x"in s&&n(1,o=s.x),"y"in s&&n(2,a=s.y),"delay"in s&&n(3,u=s.delay),"duration"in s&&n(4,l=s.duration),"translate"in s&&n(5,i=s.translate)},[r,o,a,u,l,i]}class ks extends oe{constructor(t){super(),ie(this,t,Ss,_s,Q,{title:0,x:1,y:2,delay:3,duration:4,translate:5})}}function Es(e){let t,n,r,o,a,u,l;return{c(){t=B("div"),n=B("span"),r=he(e[2]),C(n,"class","overflow-hidden text-ellipsis whitespace-nowrap px-1 py-0.5 text-center text-xs font-semibold text-white"),C(t,"class",o="flex min-h-full max-w-[7rem] flex-1 cursor-default items-center justify-center rounded-md bg-primary "+e[3]),O(t,"background-color",e[0]),O(t,"color",e[1])},m(i,s){re(i,t,s),L(t,n),L(n,r),u||(l=gt(a=At.call(null,t,{title:e[2]})),u=!0)},p(i,[s]){s&4&&Oe(r,i[2]),s&8&&o!==(o="flex min-h-full max-w-[7rem] flex-1 cursor-default items-center justify-center rounded-md bg-primary "+i[3])&&C(t,"class",o),a&&Y(a.update)&&s&4&&a.update.call(null,{title:i[2]}),s&1&&O(t,"background-color",i[0]),s&2&&O(t,"color",i[1])},i:j,o:j,d(i){i&&K(t),u=!1,l()}}}function Ts(e,t,n){let{bgColor:r="royalblue"}=t,{textColor:o="white"}=t,{name:a}=t,{class:u=""}=t;return e.$$set=l=>{"bgColor"in l&&n(0,r=l.bgColor),"textColor"in l&&n(1,o=l.textColor),"name"in l&&n(2,a=l.name),"class"in l&&n(3,u=l.class)},[r,o,a,u]}class Ar extends oe{constructor(t){super(),ie(this,t,Ts,Es,Q,{bgColor:0,textColor:1,name:2,class:3})}}function Cs(e){let t,n,r,o=`url(${e[3]})`,a=`url(${e[3]})`,u,l;return{c(){t=B("button"),C(t,"role",e[1]),C(t,"class",n="block h-[1em] w-[1em] cursor-pointer bg-current "+(e[1]==="img"?"pointer-events-none":"")+" "+e[2]),O(t,"mask-image",o),O(t,"mask-repeat","no-repeat"),O(t,"mask-position","center"),O(t,"mask-size","cover"),O(t,"-webkit-mask-image",a),O(t,"-webkit-mask-repeat","no-repeat"),O(t,"-webkit-mask-position","center"),O(t,"-webkit-mask-size","cover")},m(i,s){re(i,t,s),u||(l=[gt(r=At.call(null,t,{title:e[0]})),De(t,"click",e[5])],u=!0)},p(i,[s]){s&2&&C(t,"role",i[1]),s&6&&n!==(n="block h-[1em] w-[1em] cursor-pointer bg-current "+(i[1]==="img"?"pointer-events-none":"")+" "+i[2])&&C(t,"class",n),r&&Y(r.update)&&s&1&&r.update.call(null,{title:i[0]}),s&8&&o!==(o=`url(${i[3]})`)&&O(t,"mask-image",o),s&8&&a!==(a=`url(${i[3]})`)&&O(t,"-webkit-mask-image",a)},i:j,o:j,d(i){i&&K(t),u=!1,q(l)}}}function Ms(e,t,n){let r,{icon:o="default"}=t,{title:a=""}=t,{role:u="button"}=t,{class:l="text-2xl hover:text-primary-focus"}=t;function i(s){Vt.call(this,e,s)}return e.$$set=s=>{"icon"in s&&n(4,o=s.icon),"title"in s&&n(0,a=s.title),"role"in s&&n(1,u=s.role),"class"in s&&n(2,l=s.class)},e.$$.update=()=>{e.$$.dirty&16&&n(3,r=`../../icons/${o}.svg`)},[a,u,l,r,o,i]}class Ls extends oe{constructor(t){super(),ie(this,t,Ms,Cs,Q,{icon:4,title:0,role:1,class:2})}}function Ds(e){let t,n,r,o,a,u,l;const i=e[2].default,s=fn(i,e,e[1],null);return{c(){t=B("label"),s&&s.c(),n=V(),r=B("span"),o=B("input"),C(o,"type","color"),C(o,"class","invisible h-full w-full"),C(r,"class","h-8 w-16 cursor-pointer rounded-md border-2 border-gray-600"),O(r,"background-color",e[0]),C(t,"class","flex max-w-max items-center gap-1")},m(f,c){re(f,t,c),s&&s.m(t,null),L(t,n),L(t,r),L(r,o),yt(o,e[0]),a=!0,u||(l=[De(o,"input",e[4]),De(o,"change",e[3])],u=!0)},p(f,[c]){s&&s.p&&(!a||c&2)&&gn(s,i,f,f[1],a?dn(i,f[1],c,null):mn(f[1]),null),c&1&&yt(o,f[0]),c&1&&O(r,"background-color",f[0])},i(f){a||(ne(s,f),a=!0)},o(f){pe(s,f),a=!1},d(f){f&&K(t),s&&s.d(f),u=!1,q(l)}}}function Os(e,t,n){let{$$slots:r={},$$scope:o}=t,{color:a}=t;function u(i){Vt.call(this,e,i)}function l(){a=this.value,n(0,a)}return e.$$set=i=>{"color"in i&&n(0,a=i.color),"$$scope"in i&&n(1,o=i.$$scope)},[a,o,r,u,l]}class wr extends oe{constructor(t){super(),ie(this,t,Os,Ds,Q,{color:0})}}const At=(e,{title:t,delay:n,duration:r})=>{if(!t)return;e.setAttribute("aria-label",t);let o;e.addEventListener("pointerover",a),e.addEventListener("pointerout",u);function a(l){if(l.target!==l.currentTarget)return;const i=e.getBoundingClientRect(),s=window.scrollX+i.left,f=window.scrollY+i.top,c=window.innerWidth-s;let g=i.width/2,b=i.height*1.2,A={X:-50,Y:0};c<120&&(g=-8,b=i.height/2,A={X:-100,Y:-50}),s<120&&(g=i.width+8,b=i.height/2,A={X:0,Y:-50});const d=s+g,p=f+b;o||(o=new ks({target:document.body,props:{title:t,x:d,y:p,translate:A,delay:n,duration:r},intro:!0}))}function u(){o==null||o.$destroy(),o=null}return{update(l){t=l.title,n=l.delay,r=l.duration,o==null||o.$set(l)},destroy(){e.removeEventListener("pointerover",a),e.removeEventListener("pointerleave",u),u()}}};function Bs(e,t){switch(e){case"newest":return t.sort((n,r)=>n.dateSaved-r.dateSaved);case"oldest":return t.sort((n,r)=>r.dateSaved-n.dateSaved);case"az":return t.sort((n,r)=>-n.title.localeCompare(r.title));case"za":return t.sort((n,r)=>n.title.localeCompare(r.title))}}function js(e,t){return t==="__all__"?e:e.filter(n=>n.tags===t)}function Ye(e,t,n){return Bs(t,js(e,n))}const ut=se({query:"",sortMethod:"newest",tagsFilter:"__all__"}),Ke=(()=>{let e;const t={popupView:!0,darkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,selectionId:"current",discarded:!0,urlFilterList:void 0,autoSave:$e.autoSave,autoSaveMaxSessions:$e.autoSaveMaxSessions,autoSaveTimer:$e.autoSaveTimer,tags:{},doNotAskForTitle:!0,exportCompressed:!0,excludePinned:!0,sortMethod:"newest",tagsFilter:"__all__"},{subscribe:n,set:r,update:o}=se(t);a(),z.storage.local.onChanged.addListener(u);async function a(){if(e){await e;return}M.info("[settings.init]"),e=ms(t);const i=await e;r(i),Bt(i.darkMode,!1),ut.set({sortMethod:i.sortMethod,tagsFilter:i.tagsFilter,query:""}),e=Promise.resolve({}),await gs("updated",!1)&&($.set({msg:z.i18n.getMessage("notifyExtUpdate","1.7.4"),type:"info"}),Ot({updated:!1}))}function u(i){o(s=>{var f;for(const c in i)s[c]=((f=i[c])==null?void 0:f.newValue)??t[c],c==="darkMode"&&Bt(s[c],!0),c==="selectionId"&&ze.selection.selectById(s[c]),(c==="sortMethod"||c==="tagsFilter")&&ut.update(g=>(g[c]=s[c],g));return s})}function l(){return z.storage.local.clear()}return{subscribe:n,init:a,changeSetting(i,s){Ot({[i]:s}),o(f=>(f[i]=s,f))},clear:l}})(),$=(()=>{const{subscribe:e,set:t}=se();function n(i,s){t({type:"info",msg:i}),s&&M.info(s)}function r(i,s){t({type:"success",msg:i}),s&&M.info(s)}function o(i,s){t({type:"warning",msg:i}),s&&M.warn(s)}function a(i,s){t({type:"error",msg:i}),s&&M.error(s)}function u(i,s){t({type:"warning",msg:i}),s&&M.info(s)}function l(i,s){t({type:"info",msg:i}),s&&M.info(s)}return{subscribe:e,set:t,info:n,success:r,warning:o,error:a,success_info:l,success_warning:u}})();let Is=!1;const ze=(()=>{const{subscribe:e,set:t,update:n}=se([]),r=se();o();async function o(){const d=await G.streamSessions("dateSaved",t,50);M.info(`[sessions.load] loaded ${d} session`),await Ke.init();const{selectionId:p}=le(Ke);g(p),Is=!0}async function a(d){if(!d.windows.length||!d.tabsNumber)return $.error(z.i18n.getMessage("notifySaveFailEmpty"),"[sessions.add]: session is empty");const p=fs(d);return await G.saveSession(p),n(w=>(p.windows={length:p.windows.length},w.push(p),A(w,p.id),w)),c(p),$.success(z.i18n.getMessage("notifySaveSuccess")),p.id}async function u(d){if(!d.windows.length||!d.tabsNumber)return s(d);Array.isArray(d.windows)||(d.windows=await G.loadSessionWindows(d.id)),await G.updateSession(d),n(p=>(d.dateModified=Date.now(),d.windows={length:d.windows.length},p[p.indexOf(d)]=d,A(p,d.id),p)),g(d.id),$.success_info(z.i18n.getMessage("notifyUpdateSuccess"))}let l;async function i(d){return l&&clearTimeout(l),await new Promise((w,S)=>{l=setTimeout(async()=>{var v;d||S("There is no search query");const k=await G.loadSessions();k.length||S("There are no saved sessions");const x=[];for(const h of k){if((v=h==null?void 0:h.title)!=null&&v.toLowerCase().includes(d)){x.push(h);continue}h.windows.some(y=>{var m;return(m=y.tabs)==null?void 0:m.some(_=>{var E;return(E=_.title)==null?void 0:E.toLowerCase().includes(d)})})&&(h.windows={length:h.windows.length},x.push(h))}w(x)},250)})}async function s(d){if(!d||!d.id||d.id==="current")return $.error(z.i18n.getMessage("notifyDeleteFailUndefined"),"[sessions.remove] error: removing undefined session");n(p=>{const w=p.indexOf(d);return w===-1?($.error(z.i18n.getMessage("notifyDeleteFailUndefined"),"[sessions.remove] error: removing undefined session"),p):(G.deleteSession(d),p.splice(w,1),A(p),$.success_warning(z.i18n.getMessage("notifyDeleteSuccess")),p)})}async function f(){if(!le({subscribe:e}).length){$.error(z.i18n.getMessage("notifyDeleteAllFailUndefined"),"[sessions.removeAll] sessions are already empty");return}await G.deleteSessions(),t([]),c(le(Ge)),$.success_warning(z.i18n.getMessage("notifyDeleteAllSuccess")),A([])}async function c(d){Ke.changeSetting("selectionId",d.id)}async function g(d){if(b(),d==="current")return r.set(le(Ge));const p=G.loadSessionWindows(d),w=le({subscribe:e});for(const S of w)if(S.id===d){S.windows=await p,r.set(S);return}return c(le(Ge))}function b(){r.update(d=>{var p;return(d==null?void 0:d.id)!=="current"&&((p=d==null?void 0:d.windows)!=null&&p.length)&&(d.windows={length:d.windows.length}),d})}function A(d,p){M.info("[db.notify]: init"),ds({message:"notifyChangeDB",sessions:d,selectedId:p})}return W.runtime.onMessage.addListener(d=>{if(d.message==="notifyChangeDB"){if(t(d.sessions),!d.selectedId)return;g(d.selectedId)}}),{subscribe:e,load:o,add:a,put:u,filter:i,remove:s,removeAll:f,selection:{subscribe:r.subscribe,select:c,selectById:g,set:r.set}}})(),yr=(()=>{let e="",t=[];const{subscribe:n}=Jt([ze,ut],([r,o],a)=>{const{query:u,tagsFilter:l,sortMethod:i}=o;u?e!==u?(e=u,ze.filter(u.trim().toLowerCase()).then(s=>{t=s,a(Ye(t,i,l))})):a(Ye(t,i,l)):a(Ye(r,i,l))});return{subscribe:n}})(),xr=Jt(ze,e=>{const t={};for(const n of e)n.tags&&(t[n.tags]=(t[n.tags]??0)+1);return t}),Ge=se();export{Ae as $,Ws as A,De as B,fn as C,V as D,O as E,L as F,$s as G,Vs as H,_n as I,Sn as J,gn as K,mn as L,dn as M,q as N,Fs as O,Ls as P,z as Q,Vt as R,oe as S,Us as T,he as U,Oe as V,be as W,Js as X,br as Y,pr as Z,Hs as _,ar as a,Ks as a0,Gs as a1,yt as a2,Ke as a3,gs as a4,Zs as a5,Ar as a6,Xs as a7,qs as a8,wr as a9,fs as aA,gt as aa,At as ab,Y as ac,ut as ad,G as ae,ds as af,er as ag,tr as ah,yr as ai,Rs as aj,Ys as ak,ur as al,xr as am,Is as an,vs as ao,gr as ap,mr as aq,Ce as ar,lr as as,rr as at,$ as au,dr as av,fr as aw,hr as ax,Ns as ay,ir as az,W as b,cr as c,xt as d,sr as e,Ie as f,Dt as g,Qs as h,ie as i,ne as j,pe as k,cs as l,_e as m,Se as n,zs as o,Ge as p,ze as q,j as r,Q as s,or as t,dt as u,nr as v,B as w,C as x,re as y,K as z};
