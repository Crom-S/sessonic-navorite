import"./modulepreload-polyfill-9p4a8sJU.js";import{b as te,g as en,c as ot,l as tn,t as nn,a as ln,S as oe,i as se,s as ee,d as x,e as ue,f as F,m as W,h as fe,j as w,k as $,n as U,o as Q,p as ve,q as ie,r as z,u as We,v as me,w as T,x as p,y as D,z as A,A as De,B as J,C as je,D as R,E as ae,F as _,G as Je,H as Ot,I as ne,J as le,K as Oe,L as Ve,M as ze,N as Me,O as on,P as G,Q as I,R as Vt,T as we,U as E,V as ce,W as Ee,X as Pe,Y as st,Z as rt,_ as zt,$ as Et,a0 as ye,a1 as Xt,a2 as de,a3 as ge,a4 as sn,a5 as Zt,a6 as Jt,a7 as Ie,a8 as rn,a9 as it,aa as Ce,ab as Te,ac as Fe,ad as Le,ae as an,af as Yt,ag as at,ah as un,ai as fn,aj as Se,ak as cn,al as dn,am as gn,an as mn,ao as ut,ap as pn,aq as ft,ar as ct,as as qe,at as Gt,au as _n,av as Qt,aw as bn,ax as hn,ay as wn}from"./sessions-qqJtB2Ni.js";async function kn(l={},e){var n,o;const t=await((o=(n=te)==null?void 0:n.tabs)==null?void 0:o.query(l));for(const r of t)if(r.url){r.url.startsWith(en("discarded"))&&(r.url=Mn(r.url)),r.favIconUrl&&(ot&&(r.favIconUrl=await ot.icon(r.favIconUrl,e)),r.favIconUrl=tn.compress(r.favIconUrl));for(const s in r)nn.includes(s)||delete r[s]}return t}async function $n(l){var t,n;const e={title:"Current Session",windows:[],id:"current",dateSaved:void 0,dateModified:void 0,tabsNumber:0};l||(l={}),e.windows=await((n=(t=te)==null?void 0:t.windows)==null?void 0:n.getAll());for(const o of e.windows)l.windowId=o.id,o.tabs=await kn(l,ln),e.tabsNumber+=o.tabs.length;return e}function Mn(l){const e=new URLSearchParams(new URL(l).search);return decodeURIComponent(e.get("url"))}function xt(l,e,t){const n=new RegExp(e,`${t.all?"g":""}${t.case_sensitive?"":"i"}`);return l==null?void 0:l.replace(n,"<mark>$&</mark>")}function dt(l,e,t){const n=l.slice();return n[7]=e[t],n}function gt(l){let e,t,n;function o(){return l[3](l[7])}return{c(){e=T("li"),e.textContent=`${l[7].title} `,p(e,"class","hover:bg-primary-5 cursor-pointer rounded-md px-4 py-2")},m(r,s){D(r,e,s),t||(n=J(e,"click",o),t=!0)},p(r,s){l=r},d(r){r&&A(e),t=!1,n()}}}function vn(l){let e,t=me(l[2]),n=[];for(let o=0;o<t.length;o+=1)n[o]=gt(dt(l,t,o));return{c(){e=T("ul");for(let o=0;o<n.length;o+=1)n[o].c();p(e,"slot","content"),p(e,"class","flex flex-col gap-2 font-semibold")},m(o,r){D(o,e,r);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null)},p(o,r){if(r&5){t=me(o[2]);let s;for(s=0;s<t.length;s+=1){const a=dt(o,t,s);n[s]?n[s].p(a,r):(n[s]=gt(a),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(o){o&&A(e),De(n,o)}}}function Cn(l){let e,t,n;function o(s){l[4](s)}let r={$$slots:{content:[vn]},$$scope:{ctx:l}};return l[0]!==void 0&&(r.open=l[0]),e=new Ue({props:r}),x.push(()=>ue(e,"open",o)),{c(){F(e.$$.fragment)},m(s,a){W(e,s,a),n=!0},p(s,[a]){const i={};a&1025&&(i.$$scope={dirty:a,ctx:s}),!t&&a&1&&(t=!0,i.open=s[0],fe(()=>t=!1)),e.$set(i)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function Tn(l,e,t){let n,o,r=z,s=()=>(r(),r=We(n,c=>t(5,o=c)),n),a;Q(l,ve,c=>t(6,a=c)),l.$$.on_destroy.push(()=>r());let{open:i=!1}=e;const u=[{title:"Save current session",action:()=>ie.add(a)},{title:"Delete selected session",action:()=>ie.remove(o)},{title:"Delete all sessions",action:ie.removeAll}],f=c=>{c.action(),t(0,i=!1)};function g(c){i=c,t(0,i)}return l.$$set=c=>{"open"in c&&t(0,i=c.open)},s(t(1,n=ie.selection)),[i,n,u,f,g]}class Sn extends oe{constructor(e){super(),se(this,e,Tn,Cn,ee,{open:0})}}const yn=l=>({}),mt=l=>({}),Nn=l=>({}),pt=l=>({}),In=l=>({}),_t=l=>({});function bt(l){let e,t,n,o,r;const s=l[6].header,a=je(s,l,l[5],_t);return o=new G({props:{icon:"close",class:"ml-auto text-xl hover:text-error-focus"}}),o.$on("click",l[8]),{c(){e=T("div"),t=T("h3"),a&&a.c(),n=R(),F(o.$$.fragment),p(t,"class","font-bold"),p(e,"class","flex items-center")},m(i,u){D(i,e,u),_(e,t),a&&a.m(t,null),_(e,n),W(o,e,null),r=!0},p(i,u){a&&a.p&&(!r||u&32)&&Oe(a,s,i,i[5],r?ze(s,i[5],u,In):Ve(i[5]),_t)},i(i){r||(w(a,i),w(o.$$.fragment,i),r=!0)},o(i){$(a,i),$(o.$$.fragment,i),r=!1},d(i){i&&A(e),a&&a.d(i),U(o)}}}function ht(l){let e,t,n,o,r,s;const a=l[6].footer,i=je(a,l,l[5],mt);return{c(){e=T("div"),t=T("button"),t.textContent=`${I.i18n.getMessage("labelClose")}`,n=R(),i&&i.c(),p(t,"class","rounded-md bg-neutral-3 px-4 py-1 text-neutral-content hover:bg-neutral-4"),p(t,"type","button"),p(e,"class","ml-auto mt-auto flex gap-2 font-medium")},m(u,f){D(u,e,f),_(e,t),_(e,n),i&&i.m(e,null),o=!0,r||(s=J(t,"click",l[9]),r=!0)},p(u,f){i&&i.p&&(!o||f&32)&&Oe(i,a,u,u[5],o?ze(a,u[5],f,yn):Ve(u[5]),mt)},i(u){o||(w(i,u),o=!0)},o(u){$(i,u),o=!1},d(u){u&&A(e),i&&i.d(u),r=!1,s()}}}function Ln(l){let e,t,n,o,r,s,a,i=l[4].header&&bt(l);const u=l[6].content,f=je(u,l,l[5],pt);let g=l[4].footer&&ht(l);return{c(){e=T("dialog"),t=T("div"),i&&i.c(),n=R(),f&&f.c(),o=R(),g&&g.c(),p(t,"role","none"),p(t,"class","flex h-full min-h-[10rem] w-full min-w-[16rem] flex-col gap-4 px-4 py-2 text-base"),ae(t,"height",l[1]),ae(t,"width",l[2]),p(e,"class","max-h-lg max-w-3xl rounded-md border border-white/25 bg-transparent text-white outline-none backdrop-blur svelte-6g6pgo")},m(c,d){D(c,e,d),_(e,t),i&&i.m(t,null),_(t,n),f&&f.m(t,null),_(t,o),g&&g.m(t,null),l[10](e),r=!0,s||(a=[J(t,"click",Je(l[7])),J(e,"mousedown",Ot(l[11])),J(e,"keydown",l[12])],s=!0)},p(c,[d]){c[4].header?i?(i.p(c,d),d&16&&w(i,1)):(i=bt(c),i.c(),w(i,1),i.m(t,n)):i&&(ne(),$(i,1,1,()=>{i=null}),le()),f&&f.p&&(!r||d&32)&&Oe(f,u,c,c[5],r?ze(u,c[5],d,Nn):Ve(c[5]),pt),c[4].footer?g?(g.p(c,d),d&16&&w(g,1)):(g=ht(c),g.c(),w(g,1),g.m(t,null)):g&&(ne(),$(g,1,1,()=>{g=null}),le()),d&2&&ae(t,"height",c[1]),d&4&&ae(t,"width",c[2])},i(c){r||(w(i),w(f,c),w(g),r=!0)},o(c){$(i),$(f,c),$(g),r=!1},d(c){c&&A(e),i&&i.d(),f&&f.d(c),g&&g.d(),l[10](null),s=!1,Me(a)}}}function Dn(l,e,t){let{$$slots:n={},$$scope:o}=e;const r=on(n);let{open:s=!1}=e,{height:a="10rem"}=e,{width:i="fit-content"}=e,u;function f(b){Vt.call(this,l,b)}const g=()=>t(0,s=!1),c=()=>t(0,s=!1);function d(b){x[b?"unshift":"push"](()=>{u=b,t(3,u)})}const m=()=>t(0,s=!1),h=b=>{b.key==="Escape"&&t(0,s=!1)};return l.$$set=b=>{"open"in b&&t(0,s=b.open),"height"in b&&t(1,a=b.height),"width"in b&&t(2,i=b.width),"$$scope"in b&&t(5,o=b.$$scope)},l.$$.update=()=>{l.$$.dirty&9&&(s?u==null||u.showModal():u==null||u.close())},[s,a,i,u,r,o,n,f,g,c,d,m,h]}class Ue extends oe{constructor(e){super(),se(this,e,Dn,Ln,ee,{open:0,height:1,width:2})}}function wt(l){let e=l[0],t,n,o=kt(l);return{c(){o.c(),t=we()},m(r,s){o.m(r,s),D(r,t,s),n=!0},p(r,s){s&1&&ee(e,e=r[0])?(ne(),$(o,1,1,z),le(),o=kt(r),o.c(),w(o,1),o.m(t.parentNode,t)):o.p(r,s)},i(r){n||(w(o),n=!0)},o(r){$(o),n=!1},d(r){r&&A(t),o.d(r)}}}function kt(l){let e,t,n=l[0].msg+"",o,r,s,a,i,u,f;return a=new G({props:{icon:"close",class:"ml-auto text-lg hover:text-error-focus"}}),a.$on("click",l[5]),{c(){e=T("div"),t=T("h2"),o=E(n),r=R(),s=T("div"),F(a.$$.fragment),p(t,"class","whitespace-nowrap"),p(s,"class","bg-overlay-black rounded-md p-0.5"),p(e,"class",i="flex h-max max-h-full w-max items-center gap-2 rounded-md px-2 py-1 "+l[3]+" absolute bottom-5 right-5 text-sm font-semibold")},m(g,c){D(g,e,c),_(e,t),_(t,o),_(e,r),_(e,s),W(a,s,null),f=!0},p(g,c){l=g,(!f||c&1)&&n!==(n=l[0].msg+"")&&ce(o,n),(!f||c&8&&i!==(i="flex h-max max-h-full w-max items-center gap-2 rounded-md px-2 py-1 "+l[3]+" absolute bottom-5 right-5 text-sm font-semibold"))&&p(e,"class",i)},i(g){f||(w(a.$$.fragment,g),Ee(()=>{f&&(u||(u=Pe(e,rt,{duration:l[1],easing:st},!0)),u.run(1))}),f=!0)},o(g){$(a.$$.fragment,g),u||(u=Pe(e,rt,{duration:l[1],easing:st},!1)),u.run(0),f=!1},d(g){g&&A(e),U(a),g&&u&&u.end()}}}function An(l){let e,t,n=l[2]&&l[0]&&wt(l);return{c(){n&&n.c(),e=we()},m(o,r){n&&n.m(o,r),D(o,e,r),t=!0},p(o,[r]){o[2]&&o[0]?n?(n.p(o,r),r&5&&w(n,1)):(n=wt(o),n.c(),w(n,1),n.m(e.parentNode,e)):n&&(ne(),$(n,1,1,()=>{n=null}),le())},i(o){t||(w(n),t=!0)},o(o){$(n),t=!1},d(o){o&&A(e),n&&n.d(o)}}}function Hn(l,e,t){let n,{detail:o}=e,{slideDuration:r=400}=e,s,a;const i=()=>t(2,n=!1);return l.$$set=u=>{"detail"in u&&t(0,o=u.detail),"slideDuration"in u&&t(1,r=u.slideDuration)},l.$$.update=()=>{l.$$.dirty&1&&t(2,n=!!o),l.$$.dirty&1&&((o==null?void 0:o.type)==="info"?t(3,a="bg-info text-white"):(o==null?void 0:o.type)==="success"?t(3,a="bg-success text-black"):(o==null?void 0:o.type)==="warning"?t(3,a="bg-warning text-black"):t(3,a="bg-error text-white")),l.$$.dirty&21&&n&&(s&&clearTimeout(s),t(4,s=setTimeout(()=>{t(2,n=!1)},(o==null?void 0:o.duration)??4e3)))},[o,r,n,a,s,i]}class Kn extends oe{constructor(e){super(),se(this,e,Hn,An,ee,{detail:0,slideDuration:1})}}let Ne,Be;function $t(l,e,t=0){let n=0,o=e??0,r=0,s=0;if(e&&l){const{scrollTop:a,scrollHeight:i}=l;Be||(Be=l.clientHeight),i>Be&&(Ne||(Ne=i/e),n=Math.floor((a-t)/Ne),o=Math.ceil((Be+a+t)/Ne),n<0&&(n=0),o>e&&(o=e),r=n*Ne,s=(e-o)*Ne)}return{start:n,end:o,paddingTop:r,paddingBottom:s}}function Mt(l,e,t){const n=l.slice();n[14]=e[t],n[17]=t;const o=n[4]?n[3][n[3].length-1-n[17]-n[0]]:n[3][n[17]+n[0]];return n[15]=o,n}const Rn=l=>({item:l&25}),vt=l=>({item:l[15]});function Ct(l){let e,t,n=`${l[6].paddingTop}px`,o=`${l[6].paddingBottom}px`,r,s,a,i,u=me({length:l[1]-l[0]}),f=[];for(let c=0;c<u.length;c+=1)f[c]=Tt(Mt(l,u,c));const g=c=>$(f[c],1,1,()=>{f[c]=null});return{c(){e=T("div"),t=T("ul");for(let c=0;c<f.length;c+=1)f[c].c();ae(t,"padding-top",n),ae(t,"padding-bottom",o),p(e,"class",r="overflow-y-auto "+l[2]),ae(e,"padding-right",l[7])},m(c,d){D(c,e,d),_(e,t);for(let m=0;m<f.length;m+=1)f[m]&&f[m].m(t,null);l[12](e),s=!0,a||(i=J(e,"scroll",l[8]),a=!0)},p(c,d){if(d&1051){u=me({length:c[1]-c[0]});let m;for(m=0;m<u.length;m+=1){const h=Mt(c,u,m);f[m]?(f[m].p(h,d),w(f[m],1)):(f[m]=Tt(h),f[m].c(),w(f[m],1),f[m].m(t,null))}for(ne(),m=u.length;m<f.length;m+=1)g(m);le()}d&64&&n!==(n=`${c[6].paddingTop}px`)&&ae(t,"padding-top",n),d&64&&o!==(o=`${c[6].paddingBottom}px`)&&ae(t,"padding-bottom",o),(!s||d&4&&r!==(r="overflow-y-auto "+c[2]))&&p(e,"class",r),d&128&&ae(e,"padding-right",c[7])},i(c){if(!s){for(let d=0;d<u.length;d+=1)w(f[d]);s=!0}},o(c){f=f.filter(Boolean);for(let d=0;d<f.length;d+=1)$(f[d]);s=!1},d(c){c&&A(e),De(f,c),l[12](null),a=!1,i()}}}function Tt(l){let e;const t=l[11].default,n=je(t,l,l[10],vt);return{c(){n&&n.c()},m(o,r){n&&n.m(o,r),e=!0},p(o,r){n&&n.p&&(!e||r&1049)&&Oe(n,t,o,o[10],e?ze(t,o[10],r,Rn):Ve(o[10]),vt)},i(o){e||(w(n,o),e=!0)},o(o){$(n,o),e=!1},d(o){n&&n.d(o)}}}function Fn(l){let e,t,n=l[3]&&l[3].length&&Ct(l);return{c(){n&&n.c(),e=we()},m(o,r){n&&n.m(o,r),D(o,e,r),t=!0},p(o,[r]){o[3]&&o[3].length?n?(n.p(o,r),r&8&&w(n,1)):(n=Ct(o),n.c(),w(n,1),n.m(e.parentNode,e)):n&&(ne(),$(n,1,1,()=>{n=null}),le())},i(o){t||(w(n),t=!0)},o(o){$(n),t=!1},d(o){o&&A(e),n&&n.d(o)}}}function Wn(l,e,t){let n,{$$slots:o={},$$scope:r}=e,{class:s=""}=e,{items:a}=e,{start:i=0}=e,{end:u=0}=e;function f(k,B="smooth"){if(k<0)return;const v=g?a.length-k-1:k;d==null||d.scrollTo({top:(d==null?void 0:d.scrollHeight)/a.length*v,left:0,behavior:B})}let{reversed:g=!1}=e,c="0";zt(()=>{if(Et){t(7,c=(d==null?void 0:d.scrollHeight)>(d==null?void 0:d.clientHeight)?"1rem":"0");return}t(7,c=(d==null?void 0:d.scrollHeight)>(d==null?void 0:d.clientHeight)?"0.5rem":"0")});let d,m;function h(){m&&clearTimeout(m),m=setTimeout(()=>{t(6,n=$t(d,a==null?void 0:a.length,300)),clearTimeout(m)},5)}function b(k){x[k?"unshift":"push"](()=>{d=k,t(5,d)})}return l.$$set=k=>{"class"in k&&t(2,s=k.class),"items"in k&&t(3,a=k.items),"start"in k&&t(0,i=k.start),"end"in k&&t(1,u=k.end),"reversed"in k&&t(4,g=k.reversed),"$$scope"in k&&t(10,r=k.$$scope)},l.$$.update=()=>{l.$$.dirty&40&&t(6,n=$t(d,a==null?void 0:a.length,300)),l.$$.dirty&64&&(t(0,i=n.start),t(1,u=n.end))},[i,u,s,a,g,d,n,c,h,f,r,o,b]}class Un extends oe{constructor(e){super(),se(this,e,Wn,Fn,ee,{class:2,items:3,start:0,end:1,scrollToIndex:9,reversed:4})}get scrollToIndex(){return this.$$.ctx[9]}}function Bn(l){let e=I.i18n.getMessage("deleteModalTitle")+"",t;return{c(){t=E(e)},m(n,o){D(n,t,o)},p:z,d(n){n&&A(t)}}}function Pn(l){let e;return{c(){e=T("p"),e.textContent=`${I.i18n.getMessage("deleteModalContent")}`,p(e,"slot","content"),p(e,"class","font-semibold")},m(t,n){D(t,e,n)},p:z,d(t){t&&A(e)}}}function qn(l){let e,t,n;return{c(){e=T("button"),e.textContent=`${I.i18n.getMessage("labelDelete")}`,p(e,"slot","footer"),p(e,"type","button"),p(e,"class","rounded-md bg-error px-4 py-1 hover:bg-error-focus")},m(o,r){D(o,e,r),t||(n=J(e,"click",l[2]),t=!0)},p:z,d(o){o&&A(e),t=!1,n()}}}function jn(l){let e,t,n;function o(s){l[3](s)}let r={$$slots:{footer:[qn],content:[Pn],header:[Bn]},$$scope:{ctx:l}};return l[0]!==void 0&&(r.open=l[0]),e=new Ue({props:r}),x.push(()=>ue(e,"open",o)),{c(){F(e.$$.fragment)},m(s,a){W(e,s,a),n=!0},p(s,[a]){const i={};a&16&&(i.$$scope={dirty:a,ctx:s}),!t&&a&1&&(t=!0,i.open=s[0],fe(()=>t=!1)),e.$set(i)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function On(l,e,t){let{open:n}=e;const o=ye(),r=()=>{o("deleteAction")};function s(a){n=a,t(0,n)}return l.$$set=a=>{"open"in a&&t(0,n=a.open)},[n,o,r,s]}class Vn extends oe{constructor(e){super(),se(this,e,On,jn,ee,{open:0})}}function zn(l){let e=I.i18n.getMessage(l[2]==="Save"?"saveModalTitle":"renameModalTitle")+"",t;return{c(){t=E(e)},m(n,o){D(n,t,o)},p(n,o){o&4&&e!==(e=I.i18n.getMessage(n[2]==="Save"?"saveModalTitle":"renameModalTitle")+"")&&ce(t,e)},d(n){n&&A(t)}}}function St(l){let e,t;return{c(){e=T("p"),t=E(l[7]),p(e,"class","mx-auto w-max rounded-md bg-error p-1 px-2 text-sm font-semibold")},m(n,o){D(n,e,o),_(e,t)},p(n,o){o&128&&ce(t,n[7])},d(n){n&&A(e)}}}function En(l){let e,t,n,o,r,s=l[6]&&St(l);return{c(){e=T("input"),t=R(),s&&s.c(),n=we(),p(e,"class","w-[24rem] rounded-md border-2 border-solid border-neutral-4 bg-transparent px-2 py-1 font-semibold outline-none placeholder:font-normal placeholder:text-gray-200"),p(e,"type","text"),p(e,"name",l[2]),p(e,"id",l[2]),p(e,"placeholder",I.i18n.getMessage("inputModalPlaceholder")),p(e,"title","Session name"),p(e,"spellcheck",!1),p(e,"minlength",l[3]),p(e,"maxlength",l[4])},m(a,i){D(a,e,i),l[9](e),de(e,l[0]),D(a,t,i),s&&s.m(a,i),D(a,n,i),o||(r=J(e,"input",l[10]),o=!0)},p(a,i){i&4&&p(e,"name",a[2]),i&4&&p(e,"id",a[2]),i&8&&p(e,"minlength",a[3]),i&16&&p(e,"maxlength",a[4]),i&1&&e.value!==a[0]&&de(e,a[0]),a[6]?s?s.p(a,i):(s=St(a),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(a){a&&(A(e),A(t),A(n)),l[9](null),s&&s.d(a),o=!1,r()}}}function Xn(l){let e,t=I.i18n.getMessage(`label${l[2]}`)+"",n,o,r,s,a;return{c(){e=T("button"),n=E(t),e.disabled=l[6],p(e,"title",o=l[2]+" session"),p(e,"slot","footer"),p(e,"type","button"),p(e,"class",r=(l[2]==="Rename"?"px-4":"px-6")+" rounded-md bg-primary py-1 text-center font-medium text-white hover:bg-primary-focus disabled:cursor-not-allowed disabled:bg-neutral-2 disabled:text-neutral-6")},m(i,u){D(i,e,u),_(e,n),s||(a=J(e,"click",l[8]),s=!0)},p(i,u){u&4&&t!==(t=I.i18n.getMessage(`label${i[2]}`)+"")&&ce(n,t),u&64&&(e.disabled=i[6]),u&4&&o!==(o=i[2]+" session")&&p(e,"title",o),u&4&&r!==(r=(i[2]==="Rename"?"px-4":"px-6")+" rounded-md bg-primary py-1 text-center font-medium text-white hover:bg-primary-focus disabled:cursor-not-allowed disabled:bg-neutral-2 disabled:text-neutral-6")&&p(e,"class",r)},d(i){i&&A(e),s=!1,a()}}}function Zn(l){let e,t,n;function o(s){l[11](s)}let r={height:"12rem",$$slots:{footer:[Xn],content:[En],header:[zn]},$$scope:{ctx:l}};return l[1]!==void 0&&(r.open=l[1]),e=new Ue({props:r}),x.push(()=>ue(e,"open",o)),{c(){F(e.$$.fragment)},m(s,a){W(e,s,a),n=!0},p(s,[a]){const i={};a&8445&&(i.$$scope={dirty:a,ctx:s}),!t&&a&2&&(t=!0,i.open=s[1],fe(()=>t=!1)),e.$set(i)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function Jn(l,e,t){let{type:n}=e,{value:o=""}=e,{minlength:r=1}=e,{maxlength:s=120}=e,a=!0,i="",{open:u=!1}=e,f;const g=ye();async function c(){g("inputSubmit",o),t(0,o="")}function d(b){x[b?"unshift":"push"](()=>{f=b,t(5,f)})}function m(){o=this.value,t(0,o),t(1,u),t(5,f)}function h(b){u=b,t(1,u)}return l.$$set=b=>{"type"in b&&t(2,n=b.type),"value"in b&&t(0,o=b.value),"minlength"in b&&t(3,r=b.minlength),"maxlength"in b&&t(4,s=b.maxlength),"open"in b&&t(1,u=b.open)},l.$$.update=()=>{l.$$.dirty&34&&(u?Xt().then(()=>{f==null||f.focus()}):t(0,o="")),l.$$.dirty&25&&((o==null?void 0:o.length)<r||(o==null?void 0:o.length)>s?(t(6,a=!0),t(7,i=I.i18n.getMessage("inputModalErrorLength",[r.toString(),s.toString()]))):/[<>]/.test(o)?(t(6,a=!0),t(7,i=I.i18n.getMessage("inputModalErrorChar"))):t(6,a=!1))},[o,u,n,r,s,f,a,i,c,d,m,h]}class Yn extends oe{constructor(e){super(),se(this,e,Jn,Zn,ee,{type:2,value:0,minlength:3,maxlength:4,open:1})}}function yt(l,e,t){const n=l.slice();return n[4]=e[t],n}function Gn(l){let e=I.i18n.getMessage("labelAddTag")+"",t;return{c(){t=E(e)},m(n,o){D(n,t,o)},p:z,d(n){n&&A(t)}}}function Nt(l){let e,t=me(Object.keys(l[3])),n=[];for(let o=0;o<t.length;o+=1)n[o]=It(yt(l,t,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=we()},m(o,r){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(o,r);D(o,e,r)},p(o,r){if(r&8){t=me(Object.keys(o[3]));let s;for(s=0;s<t.length;s+=1){const a=yt(o,t,s);n[s]?n[s].p(a,r):(n[s]=It(a),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(o){o&&A(e),De(n,o)}}}function It(l){let e,t=l[4]+"",n,o;return{c(){e=T("option"),n=E(t),p(e,"class","bg-neutral-6 text-neutral-content"),e.__value=o=l[4],de(e,e.__value)},m(r,s){D(r,e,s),_(e,n)},p(r,s){s&8&&t!==(t=r[4]+"")&&ce(n,t),s&8&&o!==(o=r[4])&&(e.__value=o,de(e,e.__value))},d(r){r&&A(e)}}}function Lt(l){let e,t,n=I.i18n.getMessage("labelSortName")+"",o,r,s,a,i,u,f,g,c,d,m,h,b;function k(y){l[8](y)}let B={$$slots:{default:[Qn]},$$scope:{ctx:l}};l[4].bgColor!==void 0&&(B.color=l[4].bgColor),u=new it({props:B}),x.push(()=>ue(u,"color",k));function v(y){l[9](y)}let K={$$slots:{default:[xn]},$$scope:{ctx:l}};return l[4].textColor!==void 0&&(K.color=l[4].textColor),c=new it({props:K}),x.push(()=>ue(c,"color",v)),{c(){e=T("div"),t=T("label"),o=E(n),r=E(`:\r
            `),s=T("input"),i=R(),F(u.$$.fragment),g=R(),F(c.$$.fragment),p(s,"type","text"),p(s,"minlength","1"),p(s,"maxlength","15"),p(s,"placeholder",I.i18n.getMessage("tagPlaceholder")),p(s,"class","rounded-md border-2 border-neutral-4 bg-transparent px-2 py-1 outline-none"),s.value=a=l[4].name,p(e,"class","flex flex-col gap-2")},m(y,j){D(y,e,j),_(e,t),_(t,o),_(t,r),_(t,s),_(e,i),W(u,e,null),_(e,g),W(c,e,null),m=!0,h||(b=J(s,"input",l[7]),h=!0)},p(y,j){(!m||j&16&&a!==(a=y[4].name)&&s.value!==a)&&(s.value=a);const q={};j&262144&&(q.$$scope={dirty:j,ctx:y}),!f&&j&16&&(f=!0,q.color=y[4].bgColor,fe(()=>f=!1)),u.$set(q);const Z={};j&262144&&(Z.$$scope={dirty:j,ctx:y}),!d&&j&16&&(d=!0,Z.color=y[4].textColor,fe(()=>d=!1)),c.$set(Z)},i(y){m||(w(u.$$.fragment,y),w(c.$$.fragment,y),m=!0)},o(y){$(u.$$.fragment,y),$(c.$$.fragment,y),m=!1},d(y){y&&A(e),U(u),U(c),h=!1,b()}}}function Qn(l){let e=I.i18n.getMessage("settingsTagsBackground")+"",t,n;return{c(){t=E(e),n=E(":")},m(o,r){D(o,t,r),D(o,n,r)},p:z,d(o){o&&(A(t),A(n))}}}function xn(l){let e=I.i18n.getMessage("settingsTagsText")+"",t,n;return{c(){t=E(e),n=E(":")},m(o,r){D(o,t,r),D(o,n,r)},p:z,d(o){o&&(A(t),A(n))}}}function el(l){let e,t,n=I.i18n.getMessage("tagsModalSelectTag")+"",o,r,s,a,i,u,f,g=I.i18n.getMessage("settingsTagsPreview")+"",c,d,m,h,b,k,B,v,K=I.i18n.getMessage("labelAddTag")+"",y,j,q,Z,Y,H=l[3]&&Nt(l),M=l[1]==="createANewTag"&&Lt(l);function P(S){l[10](S)}function L(S){l[11](S)}function N(S){l[12](S)}let V={};return l[4].name!==void 0&&(V.name=l[4].name),l[4].bgColor!==void 0&&(V.bgColor=l[4].bgColor),l[4].textColor!==void 0&&(V.textColor=l[4].textColor),m=new Jt({props:V}),x.push(()=>ue(m,"name",P)),x.push(()=>ue(m,"bgColor",L)),x.push(()=>ue(m,"textColor",N)),{c(){e=T("form"),t=T("label"),o=E(n),r=E(`:\r
        `),s=T("select"),a=T("option"),a.textContent=`${I.i18n.getMessage("labelAddTag")}`,H&&H.c(),i=R(),M&&M.c(),u=R(),f=T("span"),c=E(g),d=E(`:\r
        `),F(m.$$.fragment),B=R(),v=T("button"),y=E(K),a.__value="createANewTag",de(a,a.__value),p(a,"class","bg-neutral-6 text-neutral-content"),p(s,"name","tags"),p(s,"id","tags"),p(s,"class","flex-1 rounded-md border-2 border-neutral-4 bg-transparent p-1 outline-none"),l[1]===void 0&&Ee(()=>l[6].call(s)),p(t,"class","flex items-center gap-2"),p(f,"class","flex gap-2"),p(v,"class","rounded-md bg-primary px-2 py-1 hover:bg-primary-focus disabled:bg-neutral-3/50 disabled:text-neutral-content/50"),v.disabled=j=!l[4].name.trim(),p(e,"class","flex h-full w-full flex-col justify-around gap-2")},m(S,C){D(S,e,C),_(e,t),_(t,o),_(t,r),_(t,s),_(s,a),H&&H.m(s,null),Ie(s,l[1],!0),_(e,i),M&&M.m(e,null),_(e,u),_(e,f),_(f,c),_(f,d),W(m,f,null),_(e,B),_(e,v),_(v,y),q=!0,Z||(Y=[J(s,"change",l[6]),J(e,"submit",rn(l[13]))],Z=!0)},p(S,C){S[3]?H?H.p(S,C):(H=Nt(S),H.c(),H.m(s,null)):H&&(H.d(1),H=null),C&10&&Ie(s,S[1]),S[1]==="createANewTag"?M?(M.p(S,C),C&2&&w(M,1)):(M=Lt(S),M.c(),w(M,1),M.m(e,u)):M&&(ne(),$(M,1,1,()=>{M=null}),le());const X={};!h&&C&16&&(h=!0,X.name=S[4].name,fe(()=>h=!1)),!b&&C&16&&(b=!0,X.bgColor=S[4].bgColor,fe(()=>b=!1)),!k&&C&16&&(k=!0,X.textColor=S[4].textColor,fe(()=>k=!1)),m.$set(X),(!q||C&16&&j!==(j=!S[4].name.trim()))&&(v.disabled=j)},i(S){q||(w(M),w(m.$$.fragment,S),q=!0)},o(S){$(M),$(m.$$.fragment,S),q=!1},d(S){S&&A(e),H&&H.d(),M&&M.d(),U(m),Z=!1,Me(Y)}}}function tl(l){let e,t,n;function o(s){l[14](s)}let r={height:"full",$$slots:{content:[el],header:[Gn]},$$scope:{ctx:l}};return l[0]!==void 0&&(r.open=l[0]),e=new Ue({props:r}),x.push(()=>ue(e,"open",o)),{c(){F(e.$$.fragment)},m(s,a){W(e,s,a),n=!0},p(s,[a]){const i={};a&262175&&(i.$$scope={dirty:a,ctx:s}),!t&&a&1&&(t=!0,i.open=s[0],fe(()=>t=!1)),e.$set(i)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function nl(l,e,t){let n;Q(l,ge,v=>t(2,n=v));let{open:o=!1}=e,r,s="createANewTag";const a={name:"",bgColor:"royalblue",textColor:"white"};let i=a;const u=ye();function f(){s=Zt(this),t(1,s),t(3,r),t(0,o)}const g=v=>{const K=v.currentTarget.value;if(K.length>15)return v.currentTarget.value=i.name;t(4,i.name=K,i)};function c(v){l.$$.not_equal(i.bgColor,v)&&(i.bgColor=v,t(4,i),t(1,s),t(2,n),t(0,o))}function d(v){l.$$.not_equal(i.textColor,v)&&(i.textColor=v,t(4,i),t(1,s),t(2,n),t(0,o))}function m(v){l.$$.not_equal(i.name,v)&&(i.name=v,t(4,i),t(1,s),t(2,n),t(0,o))}function h(v){l.$$.not_equal(i.bgColor,v)&&(i.bgColor=v,t(4,i),t(1,s),t(2,n),t(0,o))}function b(v){l.$$.not_equal(i.textColor,v)&&(i.textColor=v,t(4,i),t(1,s),t(2,n),t(0,o))}const k=()=>{if(s==="createANewTag"){if(i.name.trim()){const v=n.tags;v[i.name]={bgColor:i.bgColor,textColor:i.textColor},ge.changeSetting("tags",v),u("tagSubmit",i.name)}}else u("tagSubmit",s);t(0,o=!1)};function B(v){o=v,t(0,o)}return l.$$set=v=>{"open"in v&&t(0,o=v.open)},l.$$.update=()=>{var v,K;l.$$.dirty&6&&t(4,i=s==="createANewTag"?a:{name:s,bgColor:((v=n.tags[s])==null?void 0:v.bgColor)??"royalblue",textColor:((K=n.tags[s])==null?void 0:K.textColor)??"white"}),l.$$.dirty&1&&(o?sn("tags",{}).then(y=>{t(3,r=y)}):t(4,i=a))},[o,s,n,r,i,u,f,g,c,d,m,h,b,k,B]}class ll extends oe{constructor(e){super(),se(this,e,nl,tl,ee,{open:0})}}function Xe(l){const e=l.slice(),t=e[3].tags[e[0].tags];return e[12]=t,e}function Dt(l){let e,t,n,o=jt(l[0].dateSaved)+"",r,s,a,i,u;return t=new G({props:{icon:"history",class:"text-sm",role:"img"}}),{c(){e=T("div"),F(t.$$.fragment),n=R(),r=E(o),p(e,"class","session-card")},m(f,g){D(f,e,g),W(t,e,null),_(e,n),_(e,r),a=!0,i||(u=Ce(s=Te.call(null,e,{title:`${I.i18n.getMessage("labelSavedAt")} ${new Date(l[0].dateSaved).toLocaleString(navigator.language,{dateStyle:"short",timeStyle:"short"})}`})),i=!0)},p(f,g){(!a||g&1)&&o!==(o=jt(f[0].dateSaved)+"")&&ce(r,o),s&&Fe(s.update)&&g&1&&s.update.call(null,{title:`${I.i18n.getMessage("labelSavedAt")} ${new Date(f[0].dateSaved).toLocaleString(navigator.language,{dateStyle:"short",timeStyle:"short"})}`})},i(f){a||(w(t.$$.fragment,f),a=!0)},o(f){$(t.$$.fragment,f),a=!1},d(f){f&&A(e),U(t),i=!1,u()}}}function At(l){var n,o;let e,t;return e=new Jt({props:{name:l[0].tags,bgColor:(n=l[12])==null?void 0:n.bgColor,textColor:(o=l[12])==null?void 0:o.textColor,class:"ml-auto"}}),{c(){F(e.$$.fragment)},m(r,s){W(e,r,s),t=!0},p(r,s){var i,u;const a={};s&1&&(a.name=r[0].tags),s&9&&(a.bgColor=(i=r[12])==null?void 0:i.bgColor),s&9&&(a.textColor=(u=r[12])==null?void 0:u.textColor),e.$set(a)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){$(e.$$.fragment,r),t=!1},d(r){U(e,r)}}}function ol(l){var X,pe,_e,be,Ae;let e,t,n,o,r,s,a,i,u,f,g,c,d,m,h,b=((pe=(X=l[0])==null?void 0:X.windows)==null?void 0:pe.length)+"",k,B,v,K,y,j,q=((_e=l[0])==null?void 0:_e.tabsNumber)+"",Z,Y,H,M,P,L,N,V;s=new G({props:{icon:"rename",title:I.i18n.getMessage("labelRename"),class:"ml-auto hidden text-xl  hover:text-primary-focus group-hover:block"}}),s.$on("click",l[8]),i=new G({props:{icon:(be=l[0])!=null&&be.tags?"untag":"tag",title:I.i18n.getMessage(l[0].tags?"labelRemoveTag":"labelAddTag"),class:"hidden text-xl hover:text-primary-focus group-hover:block"}}),i.$on("click",l[9]),f=new G({props:{icon:"delete",title:I.i18n.getMessage("labelDelete"),class:"hidden text-xl text-error hover:text-error-focus group-hover:block"}}),f.$on("click",l[10]),m=new G({props:{icon:"window",class:"text-sm",role:"img"}}),y=new G({props:{icon:"tab",class:"text-sm",role:"img"}});let S=((Ae=l[0])==null?void 0:Ae.dateSaved)&&Dt(l),C=l[0].tags&&At(Xe(l));return{c(){var O;e=T("li"),t=T("button"),n=T("div"),o=T("button"),r=R(),F(s.$$.fragment),a=R(),F(i.$$.fragment),u=R(),F(f.$$.fragment),g=R(),c=T("div"),d=T("div"),F(m.$$.fragment),h=R(),k=E(b),v=R(),K=T("div"),F(y.$$.fragment),j=R(),Z=E(q),H=R(),S&&S.c(),M=R(),C&&C.c(),p(o,"class","session-name"),p(n,"class","session-info"),p(d,"class","session-card"),p(K,"class","session-card"),p(c,"class","mt-2 flex w-full flex-1 gap-2"),p(t,"class",P="session-container group "+(((O=l[4])==null?void 0:O.id)===l[0].id?"!bg-primary/30":""))},m(O,re){var he,ke,$e,He,Ke,Re;D(O,e,re),_(e,t),_(t,n),_(n,o),o.innerHTML=l[1],_(n,r),W(s,n,null),_(n,a),W(i,n,null),_(n,u),W(f,n,null),_(t,g),_(t,c),_(c,d),W(m,d,null),_(d,h),_(d,k),_(c,v),_(c,K),W(y,K,null),_(K,j),_(K,Z),_(c,H),S&&S.m(c,null),_(c,M),C&&C.m(c,null),L=!0,N||(V=[Ce(Te.call(null,o,{title:I.i18n.getMessage("popupTipOpen")})),J(o,"click",Je(l[6])),Ce(B=Te.call(null,d,{title:`${(ke=(he=l[0])==null?void 0:he.windows)==null?void 0:ke.length} ${I.i18n.getMessage(((He=($e=l[0])==null?void 0:$e.windows)==null?void 0:He.length)>1?"labelWindows":"labelWindow")}`})),Ce(Y=Te.call(null,K,{title:`${(Ke=l[0])==null?void 0:Ke.tabsNumber} ${I.i18n.getMessage(((Re=l[0])==null?void 0:Re.tabsNumber)>1?"labelTabs":"labelTab")}`})),J(t,"click",l[11])],N=!0)},p(O,[re]){var ke,$e,He,Ke,Re,Ge,Qe,xe,et,tt,nt,lt;(!L||re&2)&&(o.innerHTML=O[1]);const he={};re&1&&(he.icon=(ke=O[0])!=null&&ke.tags?"untag":"tag"),re&1&&(he.title=I.i18n.getMessage(O[0].tags?"labelRemoveTag":"labelAddTag")),i.$set(he),(!L||re&1)&&b!==(b=((He=($e=O[0])==null?void 0:$e.windows)==null?void 0:He.length)+"")&&ce(k,b),B&&Fe(B.update)&&re&1&&B.update.call(null,{title:`${(Re=(Ke=O[0])==null?void 0:Ke.windows)==null?void 0:Re.length} ${I.i18n.getMessage(((Qe=(Ge=O[0])==null?void 0:Ge.windows)==null?void 0:Qe.length)>1?"labelWindows":"labelWindow")}`}),(!L||re&1)&&q!==(q=((xe=O[0])==null?void 0:xe.tabsNumber)+"")&&ce(Z,q),Y&&Fe(Y.update)&&re&1&&Y.update.call(null,{title:`${(et=O[0])==null?void 0:et.tabsNumber} ${I.i18n.getMessage(((tt=O[0])==null?void 0:tt.tabsNumber)>1?"labelTabs":"labelTab")}`}),(nt=O[0])!=null&&nt.dateSaved?S?(S.p(O,re),re&1&&w(S,1)):(S=Dt(O),S.c(),w(S,1),S.m(c,M)):S&&(ne(),$(S,1,1,()=>{S=null}),le()),O[0].tags?C?(C.p(Xe(O),re),re&1&&w(C,1)):(C=At(Xe(O)),C.c(),w(C,1),C.m(c,null)):C&&(ne(),$(C,1,1,()=>{C=null}),le()),(!L||re&17&&P!==(P="session-container group "+(((lt=O[4])==null?void 0:lt.id)===O[0].id?"!bg-primary/30":"")))&&p(t,"class",P)},i(O){L||(w(s.$$.fragment,O),w(i.$$.fragment,O),w(f.$$.fragment,O),w(m.$$.fragment,O),w(y.$$.fragment,O),w(S),w(C),L=!0)},o(O){$(s.$$.fragment,O),$(i.$$.fragment,O),$(f.$$.fragment,O),$(m.$$.fragment,O),$(y.$$.fragment,O),$(S),$(C),L=!1},d(O){O&&A(e),U(s),U(i),U(f),U(m),U(y),S&&S.d(),C&&C.d(),N=!1,Me(V)}}}function sl(l,e,t){let n,o,r,s,a,i=z,u=()=>(i(),i=We(n,k=>t(4,a=k)),n);Q(l,ge,k=>t(3,r=k)),Q(l,Le,k=>t(7,s=k)),l.$$.on_destroy.push(()=>i());let{session:f}=e;const g=ye();async function c(){var k,B;(B=(k=f.windows[0])==null?void 0:k.tabs)!=null&&B.length||t(0,f.windows=await an.loadSessionWindows(f.id),f),Yt({message:"openSession",session:f,discarded:r.discarded}),t(0,f.windows={length:f.windows.length},f)}const d=()=>{g("renameModal")},m=()=>{if(!(f!=null&&f.tags))return g("tagsModal");delete f.tags,ie.put(f)},h=()=>g("deleteModal"),b=()=>n.select(f);return l.$$set=k=>{"session"in k&&t(0,f=k.session)},l.$$.update=()=>{l.$$.dirty&129&&t(1,o=s!=null&&s.query.trim()?xt(f==null?void 0:f.title,s==null?void 0:s.query,{case_sensitive:!1}):f==null?void 0:f.title)},u(t(2,n=ie.selection)),[f,o,n,r,a,g,c,s,d,m,h,b]}class rl extends oe{constructor(e){super(),se(this,e,sl,ol,ee,{session:0})}}function il(l){return{c:z,m:z,p:z,i:z,o:z,d:z}}function al(l){let e,t,n,o;const r=[fl,ul],s=[];function a(i,u){return i[25]?0:1}return e=a(l),t=s[e]=r[e](l),{c(){t.c(),n=we()},m(i,u){s[e].m(i,u),D(i,n,u),o=!0},p(i,u){let f=e;e=a(i),e===f?s[e].p(i,u):(ne(),$(s[f],1,1,()=>{s[f]=null}),le(),t=s[e],t?t.p(i,u):(t=s[e]=r[e](i),t.c()),w(t,1),t.m(n.parentNode,n))},i(i){o||(w(t),o=!0)},o(i){$(t),o=!1},d(i){i&&A(n),s[e].d(i)}}}function ul(l){let e;return{c(){e=T("p"),e.textContent="No sessions were found",p(e,"class","mt-2 text-center font-normal")},m(t,n){D(t,e,n)},p:z,i:z,o:z,d(t){t&&A(e)}}}function fl(l){let e,t,n;function o(s){l[17](s)}let r={reversed:!0,items:l[25],class:"flex-1",$$slots:{default:[cl,({item:s})=>({26:s}),({item:s})=>s?67108864:0]},$$scope:{ctx:l}};return l[1]!==void 0&&(r.scrollToIndex=l[1]),e=new Un({props:r}),x.push(()=>ue(e,"scrollToIndex",o)),{c(){F(e.$$.fragment)},m(s,a){W(e,s,a),n=!0},p(s,a){const i={};a&512&&(i.items=s[25]),a&201326832&&(i.$$scope={dirty:a,ctx:s}),!t&&a&2&&(t=!0,i.scrollToIndex=s[1],fe(()=>t=!1)),e.$set(i)},i(s){n||(w(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function cl(l){let e,t;return e=new rl({props:{session:l[26]}}),e.$on("renameModal",l[14]),e.$on("deleteModal",l[15]),e.$on("tagsModal",l[16]),{c(){F(e.$$.fragment)},m(n,o){W(e,n,o),t=!0},p(n,o){const r={};o&67108864&&(r.session=n[26]),e.$set(r)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){U(e,n)}}}function dl(l){let e;return{c(){e=T("p"),e.textContent="Looking for sessions...",p(e,"class","mt-2 text-center font-normal")},m(t,n){D(t,e,n)},p:z,i:z,o:z,d(t){t&&A(e)}}}function gl(l){let e,t,n,o,r,s,a,i,u,f,g,c,d,m,h,b,k,B,v;n=new hl({}),n.$on("save",l[0]);let K={ctx:l,current:null,token:null,hasCatch:!1,pending:dl,then:al,catch:il,value:25,blocks:[,,,]};at(r=l[9],K),a=new Al({props:{class:"flex-1"}});function y(M){l[18](M)}let j={type:l[5]};l[4]!==void 0&&(j.open=l[4]),u=new Yn({props:j}),x.push(()=>ue(u,"open",y)),u.$on("inputSubmit",l[19]);function q(M){l[20](M)}let Z={};l[6]!==void 0&&(Z.open=l[6]),c=new Vn({props:Z}),x.push(()=>ue(c,"open",q)),c.$on("deleteAction",l[21]);function Y(M){l[22](M)}let H={};return l[7]!==void 0&&(H.open=l[7]),h=new ll({props:H}),x.push(()=>ue(h,"open",Y)),h.$on("tagSubmit",l[23]),{c(){e=T("div"),t=T("div"),F(n.$$.fragment),o=R(),K.block.c(),s=R(),F(a.$$.fragment),i=R(),F(u.$$.fragment),g=R(),F(c.$$.fragment),m=R(),F(h.$$.fragment),p(t,"class","flex h-full max-w-xs flex-1 flex-col"),p(e,"class","mt-2 flex h-[90vh] gap-2 overflow-hidden")},m(M,P){D(M,e,P),_(e,t),W(n,t,null),_(t,o),K.block.m(t,K.anchor=null),K.mount=()=>t,K.anchor=null,_(e,s),W(a,e,null),D(M,i,P),W(u,M,P),D(M,g,P),W(c,M,P),D(M,m,P),W(h,M,P),k=!0,B||(v=J(window,"keydown",l[12]),B=!0)},p(M,[P]){l=M,K.ctx=l,P&512&&r!==(r=l[9])&&at(r,K)||un(K,l,P);const L={};P&32&&(L.type=l[5]),!f&&P&16&&(f=!0,L.open=l[4],fe(()=>f=!1)),u.$set(L);const N={};!d&&P&64&&(d=!0,N.open=l[6],fe(()=>d=!1)),c.$set(N);const V={};!b&&P&128&&(b=!0,V.open=l[7],fe(()=>b=!1)),h.$set(V)},i(M){k||(w(n.$$.fragment,M),w(K.block),w(a.$$.fragment,M),w(u.$$.fragment,M),w(c.$$.fragment,M),w(h.$$.fragment,M),k=!0)},o(M){$(n.$$.fragment,M);for(let P=0;P<3;P+=1){const L=K.blocks[P];$(L)}$(a.$$.fragment,M),$(u.$$.fragment,M),$(c.$$.fragment,M),$(h.$$.fragment,M),k=!1},d(M){M&&(A(e),A(i),A(g),A(m)),U(n),K.block.d(),K.token=null,K=null,U(a),U(u,M),U(c,M),U(h,M),B=!1,v()}}}function ml(l,e,t){let n,o,r=z,s=()=>(r(),r=We(n,N=>t(2,o=N)),n),a,i,u,f;Q(l,fn,N=>t(9,a=N)),Q(l,ve,N=>t(10,i=N)),Q(l,ge,N=>t(24,u=N)),Q(l,ie,N=>t(3,f=N)),l.$$.on_destroy.push(()=>r());let g=!1,c="Rename",d=!1,m,h=!1,b=!1;async function k(N){Se(ve,i.title=N,i);const V=await ie.add(i);m(f.findIndex(S=>S.id===V))}function B(){if(t(5,c="Save"),u.doNotAskForTitle)return k(I.i18n.getMessage("labelUnnamedSession"));t(4,g=!0)}async function v(N){if(!(N.target instanceof HTMLElement&&Ye(N.target)||N.repeat||N.ctrlKey||N.shiftKey||N.altKey||N.metaKey)){switch(N.code){case"KeyS":B();break;case"KeyC":n.select(i);break;case"KeyE":{const V=await a;let S=V.findIndex(C=>C.id===o.id)+1;(S>=V.length||S<=0)&&(S=0),n.select(V[S]),m(S);break}case"KeyD":{const V=await a;let S=V.findIndex(C=>C.id===o.id)-1;S<=-1&&(S=V.length-1),n.select(V[S]),m(S);break}case"KeyR":t(5,c="Rename"),t(4,g=!0);break;case"Delete":ie.remove(o);break;default:return}N.preventDefault()}}const K=()=>{t(5,c="Rename"),t(4,g=!0)},y=()=>t(6,d=!0),j=()=>t(7,b=!0);function q(N){m=N,t(1,m)}function Z(N){g=N,t(4,g)}const Y=async N=>{c==="Rename"&&o.title!==N.detail?(Se(n,o.title=N.detail,o),await ie.put(o),m(f.findIndex(V=>V.id===o.id))):c==="Save"&&k(N.detail),t(4,g=!1)};function H(N){d=N,t(6,d)}const M=async()=>{await ie.remove(o),n.select(i),t(6,d=!1)};function P(N){b=N,t(7,b)}const L=N=>{const V=N.detail;Se(n,o.tags=V,o),ie.put(o)};return l.$$.update=()=>{l.$$.dirty&8206&&o&&typeof m<"u"&&!h&&(t(13,h=!0),m(f.indexOf(o)))},s(t(8,n=ie.selection)),[B,m,o,f,g,c,d,b,n,a,i,k,v,h,K,y,j,q,Z,Y,H,M,P,L]}class pl extends oe{constructor(e){super(),se(this,e,ml,gl,ee,{saveAction:0})}get saveAction(){return this.$$.ctx[0]}}function _l(l){var Z,Y,H;let e,t,n,o,r,s,a,i=(((Y=(Z=l[0])==null?void 0:Z.windows)==null?void 0:Y.length)??0)+"",u,f,g,c,d,m,h=(((H=l[0])==null?void 0:H.tabsNumber)??0)+"",b,k,B,v,K,y,j,q;return s=new G({props:{icon:"window",class:"text-base",role:"img"}}),d=new G({props:{icon:"tab",class:"text-base",role:"img"}}),v=new G({props:{icon:"save",title:I.i18n.getMessage("labelSave"),class:"ml-auto text-2xl hover:text-primary-focus"}}),v.$on("click",l[5]),{c(){e=T("button"),t=T("p"),t.textContent=`${I.i18n.getMessage("labelCurrentSession")}`,n=R(),o=T("div"),r=T("div"),F(s.$$.fragment),a=R(),u=E(i),g=R(),c=T("div"),F(d.$$.fragment),m=R(),b=E(h),B=R(),F(v.$$.fragment),p(t,"class","max-w-max flex-1 overflow-hidden text-ellipsis whitespace-nowrap text-sm font-bold"),p(r,"class","session-card"),p(c,"class","session-card"),p(o,"class","flex items-center gap-2 px-1"),p(e,"class",K="mb-2 flex w-full cursor-pointer items-center gap-2 rounded-md bg-neutral-2 p-2 text-neutral-content hover:bg-neutral-3 "+(l[2]?"!bg-primary/30":""))},m(M,P){var L,N,V,S,C,X;D(M,e,P),_(e,t),_(e,n),_(e,o),_(o,r),W(s,r,null),_(r,a),_(r,u),_(o,g),_(o,c),W(d,c,null),_(c,m),_(c,b),_(e,B),W(v,e,null),y=!0,j||(q=[Ce(f=Te.call(null,r,{title:`${(N=(L=l[0])==null?void 0:L.windows)==null?void 0:N.length} ${I.i18n.getMessage(((S=(V=l[0])==null?void 0:V.windows)==null?void 0:S.length)>1?"labelWindows":"labelWindow")}`})),Ce(k=Te.call(null,c,{title:`${(C=l[0])==null?void 0:C.tabsNumber} ${I.i18n.getMessage(((X=l[0])==null?void 0:X.tabsNumber)>1?"labelTabs":"labelTab")}`})),J(e,"click",l[6])],j=!0)},p(M,[P]){var L,N,V,S,C,X,pe,_e,be;(!y||P&1)&&i!==(i=(((N=(L=M[0])==null?void 0:L.windows)==null?void 0:N.length)??0)+"")&&ce(u,i),f&&Fe(f.update)&&P&1&&f.update.call(null,{title:`${(S=(V=M[0])==null?void 0:V.windows)==null?void 0:S.length} ${I.i18n.getMessage(((X=(C=M[0])==null?void 0:C.windows)==null?void 0:X.length)>1?"labelWindows":"labelWindow")}`}),(!y||P&1)&&h!==(h=(((pe=M[0])==null?void 0:pe.tabsNumber)??0)+"")&&ce(b,h),k&&Fe(k.update)&&P&1&&k.update.call(null,{title:`${(_e=M[0])==null?void 0:_e.tabsNumber} ${I.i18n.getMessage(((be=M[0])==null?void 0:be.tabsNumber)>1?"labelTabs":"labelTab")}`}),(!y||P&4&&K!==(K="mb-2 flex w-full cursor-pointer items-center gap-2 rounded-md bg-neutral-2 p-2 text-neutral-content hover:bg-neutral-3 "+(M[2]?"!bg-primary/30":"")))&&p(e,"class",K)},i(M){y||(w(s.$$.fragment,M),w(d.$$.fragment,M),w(v.$$.fragment,M),y=!0)},o(M){$(s.$$.fragment,M),$(d.$$.fragment,M),$(v.$$.fragment,M),y=!1},d(M){M&&A(e),U(s),U(d),U(v),j=!1,Me(q)}}}function bl(l,e,t){let n,o,r,s,a,i=z,u=()=>(i(),i=We(n,v=>t(4,a=v)),n);Q(l,ve,v=>t(0,r=v)),Q(l,ge,v=>t(8,s=v)),l.$$.on_destroy.push(()=>i());const f=ye();let g;document.addEventListener("visibilitychange",c),ge.init().then(c),cn(()=>{m(),document.removeEventListener("visibilitychange",c)});function c(){if(dn()){b(),d();return}m()}function d(){te.windows.onFocusChanged.addListener(b),te.tabs.onCreated.addListener(b),te.tabs.onUpdated.addListener(b),te.tabs.onActivated.addListener(b),te.tabs.onMoved.addListener(b),te.tabs.onDetached.addListener(b),te.tabs.onRemoved.addListener(h)}function m(){te.windows.onFocusChanged.removeListener(b),te.tabs.onCreated.removeListener(b),te.tabs.onUpdated.removeListener(b),te.tabs.onActivated.removeListener(b),te.tabs.onMoved.removeListener(b),te.tabs.onDetached.removeListener(b),te.tabs.onRemoved.removeListener(h)}function h(v,K){var Z,Y,H;const y=r.windows.findIndex(M=>M.id===K.windowId);if(y===-1)return;const j=r.windows[y];let q=1;if(!K.isWindowClosing&&((Z=j.tabs)!=null&&Z.length)){const M=j.tabs.findIndex(P=>P.id===v);if(M===-1)return;j.tabs.splice(M,1)}(K.isWindowClosing||!((Y=j.tabs)!=null&&Y.length))&&(q=((H=j.tabs)==null?void 0:H.length)||q,r.windows.splice(y,1)),Se(ve,r.tabsNumber-=q,r),s.selectionId==="current"&&n.selectById("current")}async function b(){clearTimeout(g),g=setTimeout(async()=>{Se(ve,r=await $n({pinned:s.excludePinned?!1:void 0,url:s.urlFilterList}),r),s.selectionId==="current"&&n.selectById(r.id)},50)}const k=()=>f("save"),B=()=>n.select(r);return l.$$.update=()=>{l.$$.dirty&17&&t(2,o=a===r)},u(t(1,n=ie.selection)),[r,n,o,f,a,k,B]}class hl extends oe{constructor(e){super(),se(this,e,bl,_l,ee,{})}}function wl(l){let e,t,n,o,r,s,a,i,u,f;return{c(){e=T("select"),t=T("optgroup"),n=T("option"),n.textContent=`${I.i18n.getMessage("labelSortNewest")}`,o=T("option"),o.textContent=`${I.i18n.getMessage("labelSortOldest")}`,r=T("optgroup"),s=T("option"),s.textContent=`${I.i18n.getMessage("labelSortAZ")}`,a=T("option"),a.textContent=`${I.i18n.getMessage("labelSortZA")}`,n.__value="newest",de(n,n.__value),o.__value="oldest",de(o,o.__value),p(t,"label",I.i18n.getMessage("labelSortDate")),s.__value="az",de(s,s.__value),a.__value="za",de(a,a.__value),p(r,"label",I.i18n.getMessage("labelSortName")),p(e,"name","sort-method"),p(e,"id","sort-method"),p(e,"class","min-w-[5rem] rounded-md bg-neutral-3 p-1 text-center text-xs")},m(g,c){D(g,e,c),_(e,t),_(t,n),_(t,o),_(e,r),_(r,s),_(r,a),Ie(e,l[0].sortMethod),u||(f=J(e,"change",l[2]),u=!0)},p(g,[c]){c&1&&i!==(i=g[0].sortMethod)&&Ie(e,g[0].sortMethod)},i:z,o:z,d(g){g&&A(e),u=!1,f()}}}function kl(l,e,t){let n;Q(l,ge,s=>t(0,n=s));function o(s){ge.changeSetting("sortMethod",s)}return[n,o,s=>o(s.currentTarget.value)]}class $l extends oe{constructor(e){super(),se(this,e,kl,wl,ee,{})}}function Ht(l,e,t){const n=l.slice();return n[7]=e[t],n}function Kt(l){let e,t=l[7]+"",n,o,r=l[0][l[7]]+"",s,a,i;return{c(){e=T("option"),n=E(t),o=E(" ("),s=E(r),a=E(")"),e.__value=i=l[7],de(e,e.__value)},m(u,f){D(u,e,f),_(e,n),_(e,o),_(e,s),_(e,a)},p(u,f){f&1&&t!==(t=u[7]+"")&&ce(n,t),f&1&&r!==(r=u[0][u[7]]+"")&&ce(s,r),f&1&&i!==(i=u[7])&&(e.__value=i,de(e,e.__value))},d(u){u&&A(e)}}}function Ml(l){var d;let e,t,n=I.i18n.getMessage("labelTagsAll")+"",o,r,s=(((d=l[2])==null?void 0:d.length)??0)+"",a,i,u,f,g=me(Object.keys(l[0])),c=[];for(let m=0;m<g.length;m+=1)c[m]=Kt(Ht(l,g,m));return{c(){e=T("select"),t=T("option"),o=E(n),r=E(" ("),a=E(s),i=E(")");for(let m=0;m<c.length;m+=1)c[m].c();t.__value="__all__",de(t,t.__value),p(e,"name","tagsFilter"),p(e,"id","tagsFilter"),p(e,"class","min-w-[11rem] rounded-md bg-neutral-3 p-1 text-center text-xs"),l[1].tagsFilter===void 0&&Ee(()=>l[5].call(e))},m(m,h){D(m,e,h),_(e,t),_(t,o),_(t,r),_(t,a),_(t,i);for(let b=0;b<c.length;b+=1)c[b]&&c[b].m(e,null);Ie(e,l[1].tagsFilter,!0),u||(f=[J(e,"change",l[5]),J(e,"change",l[6])],u=!0)},p(m,[h]){var b;if(h&4&&s!==(s=(((b=m[2])==null?void 0:b.length)??0)+"")&&ce(a,s),h&1){g=me(Object.keys(m[0]));let k;for(k=0;k<g.length;k+=1){const B=Ht(m,g,k);c[k]?c[k].p(B,h):(c[k]=Kt(B),c[k].c(),c[k].m(e,null))}for(;k<c.length;k+=1)c[k].d(1);c.length=g.length}h&3&&Ie(e,m[1].tagsFilter)},i:z,o:z,d(m){m&&A(e),De(c,m),u=!1,Me(f)}}}function vl(l,e,t){let n,o,r,s,a;Q(l,gn,f=>t(0,o=f)),Q(l,ge,f=>t(4,r=f)),Q(l,Le,f=>t(1,s=f)),Q(l,ie,f=>t(2,a=f));function i(){s.tagsFilter=Zt(this),Le.set(s)}const u=f=>{ge.changeSetting("tagsFilter",f.currentTarget.value)};return l.$$.update=()=>{l.$$.dirty&16&&t(3,n=r.tagsFilter),l.$$.dirty&9&&n!=="__all__"&&mn&&!o[n]&&ge.changeSetting("tagsFilter","__all__")},[o,s,a,n,r,i,u]}class Cl extends oe{constructor(e){super(),se(this,e,vl,Ml,ee,{})}}function Rt(l,e,t){const n=l.slice();return n[12]=e[t],n}function Ft(l){var M,P,L,N,V,S;let e,t,n,o,r,s=I.i18n.getMessage((M=l[0])!=null&&M.incognito?"labelPrivateWindow":"labelWindow")+"",a,i,u,f,g=((L=(P=l[0])==null?void 0:P.tabs)==null?void 0:L.length)+"",c,d,m=I.i18n.getMessage(((V=(N=l[0])==null?void 0:N.tabs)==null?void 0:V.length)??0>1?"labelTabs":"labelTab")+"",h,b,k,B,v,K,y,j,q,Z,Y;n=new G({props:{role:"img",icon:(S=l[0])!=null&&S.incognito?"incognito":"window",class:l[3]+" text-lg"}}),n.$on("click",l[6]),k=new G({props:{icon:l[1]?"close":"delete",title:I.i18n.getMessage(l[1]?"labelClose":"labelDelete"),class:"ml-auto hidden text-xl text-error hover:text-error-focus group-hover:block"}}),k.$on("click",l[8]),v=new G({props:{icon:l[2]?"expand":"collapse",class:"ml-auto text-xl hover:text-primary-focus group-hover:ml-0",title:I.i18n.getMessage(l[2]?"labelExpand":"labelCollapse")}}),v.$on("click",l[9]);let H=!l[2]&&l[0]&&l[0].tabs&&Wt(l);return{c(){e=T("li"),t=T("button"),F(n.$$.fragment),o=R(),r=T("button"),a=E(s),u=R(),f=T("div"),c=E(g),d=R(),h=E(m),b=R(),F(k.$$.fragment),B=R(),F(v.$$.fragment),j=R(),H&&H.c(),p(r,"aria-label","Open in a New Window"),p(r,"class",i=l[3]+" w-max max-w-[60%] cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap text-sm font-medium hover:underline"),p(f,"class","card bg-info text-white hover:bg-info-focus"),p(f,"aria-label","Number of window tabs"),p(t,"class",K="group flex items-center gap-2 p-2 "+(l[2]?"rounded-md":"rounded-t-md")+" w-full bg-neutral-3 hover:bg-neutral-4"),p(t,"aria-expanded",y=!l[2]),p(e,"class","rounded-md bg-neutral-2")},m(C,X){D(C,e,X),_(e,t),W(n,t,null),_(t,o),_(t,r),_(r,a),_(t,u),_(t,f),_(f,c),_(f,d),_(f,h),_(t,b),W(k,t,null),_(t,B),W(v,t,null),_(e,j),H&&H.m(e,null),q=!0,Z||(Y=[Ce(Te.call(null,r,{title:I.i18n.getMessage("popupTipOpen")})),J(r,"click",l[7]),J(t,"click",Ot(Je(l[10])))],Z=!0)},p(C,X){var Ae,O,re,he,ke,$e;const pe={};X&1&&(pe.icon=(Ae=C[0])!=null&&Ae.incognito?"incognito":"window"),X&8&&(pe.class=C[3]+" text-lg"),n.$set(pe),(!q||X&1)&&s!==(s=I.i18n.getMessage((O=C[0])!=null&&O.incognito?"labelPrivateWindow":"labelWindow")+"")&&ce(a,s),(!q||X&8&&i!==(i=C[3]+" w-max max-w-[60%] cursor-pointer overflow-hidden text-ellipsis whitespace-nowrap text-sm font-medium hover:underline"))&&p(r,"class",i),(!q||X&1)&&g!==(g=((he=(re=C[0])==null?void 0:re.tabs)==null?void 0:he.length)+"")&&ce(c,g),(!q||X&1)&&m!==(m=I.i18n.getMessage((($e=(ke=C[0])==null?void 0:ke.tabs)==null?void 0:$e.length)??0>1?"labelTabs":"labelTab")+"")&&ce(h,m);const _e={};X&2&&(_e.icon=C[1]?"close":"delete"),X&2&&(_e.title=I.i18n.getMessage(C[1]?"labelClose":"labelDelete")),k.$set(_e);const be={};X&4&&(be.icon=C[2]?"expand":"collapse"),X&4&&(be.title=I.i18n.getMessage(C[2]?"labelExpand":"labelCollapse")),v.$set(be),(!q||X&4&&K!==(K="group flex items-center gap-2 p-2 "+(C[2]?"rounded-md":"rounded-t-md")+" w-full bg-neutral-3 hover:bg-neutral-4"))&&p(t,"class",K),(!q||X&4&&y!==(y=!C[2]))&&p(t,"aria-expanded",y),!C[2]&&C[0]&&C[0].tabs?H?(H.p(C,X),X&5&&w(H,1)):(H=Wt(C),H.c(),w(H,1),H.m(e,null)):H&&(ne(),$(H,1,1,()=>{H=null}),le())},i(C){q||(w(n.$$.fragment,C),w(k.$$.fragment,C),w(v.$$.fragment,C),w(H),q=!0)},o(C){$(n.$$.fragment,C),$(k.$$.fragment,C),$(v.$$.fragment,C),$(H),q=!1},d(C){C&&A(e),U(n),U(k),U(v),H&&H.d(),Z=!1,Me(Y)}}}function Wt(l){let e,t,n,o=me(l[0].tabs),r=[];for(let a=0;a<o.length;a+=1)r[a]=Ut(Rt(l,o,a));const s=a=>$(r[a],1,1,()=>{r[a]=null});return{c(){e=T("ul");for(let a=0;a<r.length;a+=1)r[a].c();p(e,"class","flex flex-col gap-1 p-2")},m(a,i){D(a,e,i);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);n=!0},p(a,i){if(i&3){o=me(a[0].tabs);let u;for(u=0;u<o.length;u+=1){const f=Rt(a,o,u);r[u]?(r[u].p(f,i),w(r[u],1)):(r[u]=Ut(f),r[u].c(),w(r[u],1),r[u].m(e,null))}for(ne(),u=o.length;u<r.length;u+=1)s(u);le()}},i(a){if(!n){for(let i=0;i<o.length;i+=1)w(r[i]);a&&Ee(()=>{n&&(t||(t=Pe(e,ut,{duration:250},!0)),t.run(1))}),n=!0}},o(a){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)$(r[i]);a&&(t||(t=Pe(e,ut,{duration:250},!1)),t.run(0)),n=!1},d(a){a&&A(e),De(r,a),a&&t&&t.end()}}}function Ut(l){let e,t;return e=new Wl({props:{tab:l[12],current:l[1]}}),e.$on("delete",l[11]),{c(){F(e.$$.fragment)},m(n,o){W(e,n,o),t=!0},p(n,o){const r={};o&1&&(r.tab=n[12]),o&2&&(r.current=n[1]),e.$set(r)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){U(e,n)}}}function Tl(l){var o,r;let e,t,n=((r=(o=l[0])==null?void 0:o.tabs)==null?void 0:r.length)&&Ft(l);return{c(){n&&n.c(),e=we()},m(s,a){n&&n.m(s,a),D(s,e,a),t=!0},p(s,[a]){var i,u;(u=(i=s[0])==null?void 0:i.tabs)!=null&&u.length?n?(n.p(s,a),a&1&&w(n,1)):(n=Ft(s),n.c(),w(n,1),n.m(e.parentNode,e)):n&&(ne(),$(n,1,1,()=>{n=null}),le())},i(s){t||(w(n),t=!0)},o(s){$(n),t=!1},d(s){s&&A(e),n&&n.d(s)}}}function Sl(l,e,t){let n,o;Q(l,ge,h=>t(4,o=h));const r=ye();let{window:s}=e,{current:a=!1}=e,i=!1;const u=()=>t(2,i=!i),f=()=>{Yt({message:"openInNewWindow",window:s,discarded:o.discarded})},g=()=>{a&&s.id?te.windows.remove(s.id):r("delete")},c=()=>t(2,i=!i),d=()=>t(2,i=!i);function m(h){Vt.call(this,l,h)}return l.$$set=h=>{"window"in h&&t(0,s=h.window),"current"in h&&t(1,a=h.current)},l.$$.update=()=>{l.$$.dirty&1&&t(3,n=s!=null&&s.focused?"text-link":"")},[s,a,i,n,o,r,u,f,g,c,d,m]}class yl extends oe{constructor(e){super(),se(this,e,Sl,Tl,ee,{window:0,current:1})}}function Bt(l,e,t){const n=l.slice();return n[10]=e[t],n[12]=t,n}function Nl(l){let e;return{c(){e=T("h2"),e.textContent="Select a session or open some tabs!",p(e,"class","mx-auto mb-1 text-center text-lg font-bold")},m(t,n){D(t,e,n)},p:z,i:z,o:z,d(t){t&&A(e)}}}function Il(l){let e,t,n,o=me(l[1].windows),r=[];for(let a=0;a<o.length;a+=1)r[a]=Pt(Bt(l,o,a));const s=a=>$(r[a],1,1,()=>{r[a]=null});return{c(){e=T("ul");for(let a=0;a<r.length;a+=1)r[a].c();p(e,"class",t="flex flex-col gap-2 overflow-y-auto "+l[0]),ae(e,"padding-right",l[3])},m(a,i){D(a,e,i);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);l[9](e),n=!0},p(a,i){if(i&98){o=me(a[1].windows);let u;for(u=0;u<o.length;u+=1){const f=Bt(a,o,u);r[u]?(r[u].p(f,i),w(r[u],1)):(r[u]=Pt(f),r[u].c(),w(r[u],1),r[u].m(e,null))}for(ne(),u=o.length;u<r.length;u+=1)s(u);le()}(!n||i&1&&t!==(t="flex flex-col gap-2 overflow-y-auto "+a[0]))&&p(e,"class",t),i&8&&ae(e,"padding-right",a[3])},i(a){if(!n){for(let i=0;i<o.length;i+=1)w(r[i]);n=!0}},o(a){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)$(r[i]);n=!1},d(a){a&&A(e),De(r,a),l[9](null)}}}function Pt(l){let e,t;function n(...o){return l[8](l[12],...o)}return e=new yl({props:{window:l[10],current:l[5]}}),e.$on("delete",n),{c(){F(e.$$.fragment)},m(o,r){W(e,o,r),t=!0},p(o,r){l=o;const s={};r&2&&(s.window=l[10]),r&32&&(s.current=l[5]),e.$set(s)},i(o){t||(w(e.$$.fragment,o),t=!0)},o(o){$(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function Ll(l){let e,t,n,o;const r=[Il,Nl],s=[];function a(i,u){var f,g;return(f=i[1])!=null&&f.windows&&((g=i[1])!=null&&g.tabsNumber)?0:1}return e=a(l),t=s[e]=r[e](l),{c(){t.c(),n=we()},m(i,u){s[e].m(i,u),D(i,n,u),o=!0},p(i,[u]){let f=e;e=a(i),e===f?s[e].p(i,u):(ne(),$(s[f],1,1,()=>{s[f]=null}),le(),t=s[e],t?t.p(i,u):(t=s[e]=r[e](i),t.c()),w(t,1),t.m(n.parentNode,n))},i(i){o||(w(t),o=!0)},o(i){$(t),o=!1},d(i){i&&A(n),s[e].d(i)}}}function Dl(l,e,t){let n,o,r,s,a=z,i=()=>(a(),a=We(n,h=>t(1,s=h)),n);Q(l,ve,h=>t(7,r=h)),l.$$.on_destroy.push(()=>a());let{class:u=""}=e,f,g="0";zt(()=>{if(Et){t(3,g=(f==null?void 0:f.scrollHeight)>(f==null?void 0:f.clientHeight)?"1rem":"0");return}t(3,g=(f==null?void 0:f.scrollHeight)>(f==null?void 0:f.clientHeight)?"0.5rem":"0")});function c(h,b){var B,v,K;if(!s||!s.windows)return;const k=s.windows[h];if(k){if((B=k.tabs)!=null&&B.length)if(b){const y=k.tabs.indexOf(b);if(y===-1)return;k.tabs.splice(y,1),Se(n,s.tabsNumber--,s)}else Se(n,s.tabsNumber-=(v=k.tabs)==null?void 0:v.length,s);(!((K=k.tabs)!=null&&K.length)||!b&&k)&&s.windows.splice(h,1),ie.put(s),(!s.windows.length||!s.tabsNumber)&&n.select(r)}}const d=(h,b)=>{c(h,b.detail)};function m(h){x[h?"unshift":"push"](()=>{f=h,t(2,f)})}return l.$$set=h=>{"class"in h&&t(0,u=h.class)},l.$$.update=()=>{l.$$.dirty&130&&t(5,o=s===r)},i(t(4,n=ie.selection)),[u,s,f,g,n,o,c,r,d,m]}class Al extends oe{constructor(e){super(),se(this,e,Dl,Ll,ee,{class:0})}}function qt(l){let e,t,n,o,r,s,a,i,u,f,g;const c=[Kl,Hl],d=[];function m(h,b){return h[3]?0:1}return n=m(l),o=d[n]=c[n](l),f=new G({props:{icon:l[1]?"close":"delete",title:I.i18n.getMessage(l[1]?"labelClose":"labelDelete"),class:"ml-auto hidden text-xl text-error hover:text-error-focus group-hover:block"}}),f.$on("click",l[7]),{c(){e=T("li"),t=T("a"),o.c(),r=R(),s=T("span"),u=R(),F(f.$$.fragment),p(s,"class",a="title "+l[4]+" svelte-lmvb7"),p(t,"class","link svelte-lmvb7"),p(t,"href",i=l[0].url),p(t,"target","_blank"),p(e,"class","tab-container group")},m(h,b){D(h,e,b),_(e,t),d[n].m(t,null),_(t,r),_(t,s),s.innerHTML=l[2],_(e,u),W(f,e,null),g=!0},p(h,b){let k=n;n=m(h),n===k?d[n].p(h,b):(ne(),$(d[k],1,1,()=>{d[k]=null}),le(),o=d[n],o?o.p(h,b):(o=d[n]=c[n](h),o.c()),w(o,1),o.m(t,r)),(!g||b&4)&&(s.innerHTML=h[2]),(!g||b&16&&a!==(a="title "+h[4]+" svelte-lmvb7"))&&p(s,"class",a),(!g||b&1&&i!==(i=h[0].url))&&p(t,"href",i);const B={};b&2&&(B.icon=h[1]?"close":"delete"),b&2&&(B.title=I.i18n.getMessage(h[1]?"labelClose":"labelDelete")),f.$set(B)},i(h){g||(w(o),w(f.$$.fragment,h),g=!0)},o(h){$(o),$(f.$$.fragment,h),g=!1},d(h){h&&A(e),d[n].d(),U(f)}}}function Hl(l){let e,t;return e=new G({props:{icon:ft(l[0].url),class:"max-h-[1rem] min-h-[1rem] min-w-[1rem] max-w-[1rem] rounded-md text-lg "+(l[4]||"text-neutral-content")}}),{c(){F(e.$$.fragment)},m(n,o){W(e,n,o),t=!0},p(n,o){const r={};o&1&&(r.icon=ft(n[0].url)),o&16&&(r.class="max-h-[1rem] min-h-[1rem] min-w-[1rem] max-w-[1rem] rounded-md text-lg "+(n[4]||"text-neutral-content")),e.$set(r)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){U(e,n)}}}function Kl(l){let e,t;return{c(){e=T("img"),ct(e.src,t=l[3])||p(e,"src",t),p(e,"alt",""),p(e,"role","presentation"),ae(e,"width","1rem"),ae(e,"height","1rem"),ae(e,"max-width","1rem"),ae(e,"max-height","1rem")},m(n,o){D(n,e,o)},p(n,o){o&8&&!ct(e.src,t=n[3])&&p(e,"src",t)},i:z,o:z,d(n){n&&A(e)}}}function Rl(l){var o;let e,t,n=((o=l[0])==null?void 0:o.url)&&qt(l);return{c(){n&&n.c(),e=we()},m(r,s){n&&n.m(r,s),D(r,e,s),t=!0},p(r,[s]){var a;(a=r[0])!=null&&a.url?n?(n.p(r,s),s&1&&w(n,1)):(n=qt(r),n.c(),w(n,1),n.m(e.parentNode,e)):n&&(ne(),$(n,1,1,()=>{n=null}),le())},i(r){t||(w(n),t=!0)},o(r){$(n),t=!1},d(r){r&&A(e),n&&n.d(r)}}}function Fl(l,e,t){let n,o,r,s;Q(l,Le,g=>t(6,s=g));let{tab:a}=e,{current:i=!1}=e;const u=ye(),f=()=>{i&&a.id?te.tabs.remove(a.id):u("delete",a)};return l.$$set=g=>{"tab"in g&&t(0,a=g.tab),"current"in g&&t(1,i=g.current)},l.$$.update=()=>{l.$$.dirty&1&&t(4,n=a.active?"text-link":""),l.$$.dirty&1&&t(3,o=pn(a.url,a.favIconUrl)),l.$$.dirty&65&&t(2,r=s!=null&&s.query.trim()&&a.title?xt(a.title,s==null?void 0:s.query,{case_sensitive:!1}):a.title)},[a,i,r,o,n,u,s,f]}class Wl extends oe{constructor(e){super(),se(this,e,Fl,Rl,ee,{tab:0,current:1})}}function Ul(l){let e,t;return e=new G({props:{icon:"open",title:I.i18n.getMessage("labelFullView")}}),e.$on("click",l[4]),{c(){F(e.$$.fragment)},m(n,o){W(e,n,o),t=!0},p:z,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){U(e,n)}}}function Bl(l){let e=I.i18n.getMessage("aboutDonateHeading")+"",t;return{c(){t=E(e)},m(n,o){D(n,t,o)},p:z,d(n){n&&A(t)}}}function Pl(l){let e,t;return e=new hn({}),{c(){F(e.$$.fragment)},m(n,o){W(e,n,o),t=!0},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){U(e,n)}}}function ql(l){let e,t,n,o,r,s,a,i,u,f,g,c,d,m,h,b,k,B,v,K,y,j,q;s=new Cl({}),i=new $l({}),f=new Kn({props:{detail:l[1]}});function Z(L){l[3](L)}let Y={};l[2].query!==void 0&&(Y.value=l[2].query),d=new Zl({props:Y}),x.push(()=>ue(d,"value",Z));let H=qe&&Ul(l);k=new G({props:{icon:"donate",title:I.i18n.getMessage("labelDonate"),class:"text-2xl hover:text-error-focus"}}),k.$on("click",l[5]),v=new G({props:{icon:"settings",title:I.i18n.getMessage("labelSettings")}}),v.$on("click",l[6]);function M(L){l[7](L)}let P={height:"100%",width:"100%",$$slots:{content:[Pl],header:[Bl]},$$scope:{ctx:l}};return l[0]!==void 0&&(P.open=l[0]),y=new Ue({props:P}),x.push(()=>ue(y,"open",M)),{c(){e=T("div"),t=T("h1"),n=E(Gt),o=R(),r=R(),F(s.$$.fragment),a=R(),F(i.$$.fragment),u=R(),F(f.$$.fragment),g=R(),c=T("div"),F(d.$$.fragment),h=R(),H&&H.c(),b=R(),F(k.$$.fragment),B=R(),F(v.$$.fragment),K=R(),F(y.$$.fragment),p(t,"class","relative"),p(c,"class","ml-auto flex h-full w-max items-center justify-end gap-2"),p(e,"class","flex max-h-8 items-center gap-2")},m(L,N){D(L,e,N),_(e,t),_(t,n),_(t,o),_(e,r),W(s,e,null),_(e,a),W(i,e,null),_(e,u),W(f,e,null),_(e,g),_(e,c),W(d,c,null),_(c,h),H&&H.m(c,null),_(c,b),W(k,c,null),_(c,B),W(v,c,null),D(L,K,N),W(y,L,N),q=!0},p(L,[N]){const V={};N&2&&(V.detail=L[1]),f.$set(V);const S={};!m&&N&4&&(m=!0,S.value=L[2].query,fe(()=>m=!1)),d.$set(S),qe&&H.p(L,N);const C={};N&256&&(C.$$scope={dirty:N,ctx:L}),!j&&N&1&&(j=!0,C.open=L[0],fe(()=>j=!1)),y.$set(C)},i(L){q||(w(s.$$.fragment,L),w(i.$$.fragment,L),w(f.$$.fragment,L),w(d.$$.fragment,L),w(H),w(k.$$.fragment,L),w(v.$$.fragment,L),w(y.$$.fragment,L),q=!0)},o(L){$(s.$$.fragment,L),$(i.$$.fragment,L),$(f.$$.fragment,L),$(d.$$.fragment,L),$(H),$(k.$$.fragment,L),$(v.$$.fragment,L),$(y.$$.fragment,L),q=!1},d(L){L&&(A(e),A(K)),U(s),U(i),U(f),U(d),H&&H.d(),U(k),U(v),U(y,L)}}}function jl(l,e,t){let n,o;Q(l,_n,g=>t(1,n=g)),Q(l,Le,g=>t(2,o=g));let r=!1;function s(g){l.$$.not_equal(o.query,g)&&(o.query=g,Le.set(o))}const a=async()=>{await Qt(),window.close()},i=()=>t(0,r=!0),u=async()=>{await bn(),qe&&window.close()};function f(g){r=g,t(0,r)}return[r,n,o,s,a,i,u,f]}class Ol extends oe{constructor(e){super(),se(this,e,jl,ql,ee,{})}}function Vl(l){let e,t;return e=new G({props:{icon:"search",role:"img",class:"text-2xl"}}),{c(){F(e.$$.fragment)},m(n,o){W(e,n,o),t=!0},p:z,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){U(e,n)}}}function zl(l){let e,t,n,o,r,s;return n=new G({props:{icon:"close",title:I.i18n.getMessage("labelClear"),class:"text-2xl hover:text-error-focus"}}),n.$on("click",l[9]),{c(){e=T("input"),t=R(),F(n.$$.fragment),p(e,"spellcheck",!1),p(e,"type","text"),p(e,"placeholder",I.i18n.getMessage("labelSearchPlaceholder")),p(e,"class","bg-transparent font-semibold text-neutral-content outline-none")},m(a,i){D(a,e,i),l[6](e),de(e,l[0]),D(a,t,i),W(n,a,i),o=!0,r||(s=[J(e,"keydown",l[7]),J(e,"input",l[8])],r=!0)},p(a,i){i&1&&e.value!==a[0]&&de(e,a[0])},i(a){o||(w(n.$$.fragment,a),o=!0)},o(a){$(n.$$.fragment,a),o=!1},d(a){a&&(A(e),A(t)),l[6](null),U(n,a),r=!1,Me(s)}}}function El(l){let e,t,n,o,r,s,a;const i=[zl,Vl],u=[];function f(g,c){return g[2]?0:1}return t=f(l),n=u[t]=i[t](l),{c(){e=T("div"),n.c(),p(e,"class",o="flex items-center justify-center rounded-md text-sm "+(l[2]?"cursor-text bg-neutral-3 px-2 py-0.5":"cursor-pointer")+" fade "+l[1]),p(e,"tabindex","-1")},m(g,c){D(g,e,c),u[t].m(e,null),r=!0,s||(a=[J(window,"keydown",l[5]),J(e,"focusin",l[4]),J(e,"focusout",l[4])],s=!0)},p(g,[c]){let d=t;t=f(g),t===d?u[t].p(g,c):(ne(),$(u[d],1,1,()=>{u[d]=null}),le(),n=u[t],n?n.p(g,c):(n=u[t]=i[t](g),n.c()),w(n,1),n.m(e,null)),(!r||c&6&&o!==(o="flex items-center justify-center rounded-md text-sm "+(g[2]?"cursor-text bg-neutral-3 px-2 py-0.5":"cursor-pointer")+" fade "+g[1]))&&p(e,"class",o)},i(g){r||(w(n),r=!0)},o(g){$(n),r=!1},d(g){g&&A(e),u[t].d(),s=!1,Me(a)}}}function Xl(l,e,t){let{value:n}=e,{class:o=""}=e,r=!1,s;async function a(d){(d==null?void 0:d.type)==="focusin"?(t(2,r=!0),await Xt(),s==null||s.focus()):(d==null?void 0:d.type)=="focusout"&&!(d!=null&&d.currentTarget.contains(d==null?void 0:d.relatedTarget))&&n===""&&t(2,r=!1)}function i(d){d.target instanceof HTMLElement&&Ye(d.target)||d.repeat||d.ctrlKey||d.shiftKey||d.altKey||d.metaKey||d.code==="KeyF"&&(a({type:"focusin"}),d.preventDefault())}function u(d){x[d?"unshift":"push"](()=>{s=d,t(3,s)})}const f=d=>{d.key==="Escape"&&t(2,r=!1)};function g(){n=this.value,t(0,n)}const c=()=>{n===""&&t(2,r=!1),t(0,n="")};return l.$$set=d=>{"value"in d&&t(0,n=d.value),"class"in d&&t(1,o=d.class)},[n,o,r,s,a,i,u,f,g,c]}class Zl extends oe{constructor(e){super(),se(this,e,Xl,El,ee,{value:0,class:1})}}const Ze={Year:31536e6,Month:2628e6,Day:864e5,Hour:36e5,Minute:6e4};function jt(l){const e=Date.now()-l;for(const t in Ze)if(e>Ze[t])return`${Math.round(e/Ze[t])} ${I.i18n.getMessage(`label${t}`)}`;return I.i18n.getMessage("labelJustNow")}function Ye(l){return["INPUT","TEXTAREA"].includes(l.tagName)||l.isContentEditable}const{window:Jl}=wn;function Yl(l){let e,t,n,o,r,s,a,i,u,f;document.title=`\r
    `+Gt+`\r
  `,t=new Ol({}),o=new pl({});function g(d){l[2](d)}let c={};return l[0]!==void 0&&(c.open=l[0]),s=new Sn({props:c}),x.push(()=>ue(s,"open",g)),{c(){e=R(),F(t.$$.fragment),n=R(),F(o.$$.fragment),r=R(),F(s.$$.fragment)},m(d,m){D(d,e,m),W(t,d,m),D(d,n,m),W(o,d,m),D(d,r,m),W(s,d,m),i=!0,u||(f=J(Jl,"keydown",l[1]),u=!0)},p(d,[m]){const h={};!a&&m&1&&(a=!0,h.open=d[0],fe(()=>a=!1)),s.$set(h)},i(d){i||(w(t.$$.fragment,d),w(o.$$.fragment,d),w(s.$$.fragment,d),i=!0)},o(d){$(t.$$.fragment,d),$(o.$$.fragment,d),$(s.$$.fragment,d),i=!1},d(d){d&&(A(e),A(n),A(r)),U(t,d),U(o,d),U(s,d),u=!1,f()}}}function Gl(l,e,t){let n;Q(l,ge,i=>t(3,n=i)),o();async function o(){await ge.init(),qe&&(n.popupView||(await Qt(),window.close()))}let r=!1;const s=i=>{i.target instanceof HTMLElement&&Ye(i.target)||i.repeat||i.shiftKey||i.altKey||i.metaKey||i.code==="KeyK"&&i.ctrlKey&&(t(0,r=!r),i.preventDefault())};function a(i){r=i,t(0,r)}return[r,s,a]}class Ql extends oe{constructor(e){super(),se(this,e,Gl,Yl,ee,{})}}new Ql({target:document.getElementById("root")});
